{"id":"bb1e83e8-75f0-4f62-a57a-ae9c6582d0d2","revision":0,"last_node_id":248,"last_link_id":395,"nodes":[{"id":70,"type":"Florence2Run","pos":[-4330.63720703125,-3515.1982421875],"size":[332.3652038574219,364],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":220},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":54},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[51]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{"text_input":true,"task":true,"fill_mask":true,"keep_model_loaded":true,"max_new_tokens":true,"num_beams":true,"do_sample":true,"output_mask_select":true,"seed":true}},"widgets_values":["","more_detailed_caption",true,false,1024,3,true,"",229181029129501,"randomize"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143,197]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142,186]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":115,"type":"StyleModelLoader","pos":[-3016.325439453125,-1917.17529296875],"size":[254.89520263671875,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-3023.66357421875,-2029.86279296875],"size":[253.3074188232422,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":158,"type":"Reroute","pos":[-3569.3505859375,-1055.771240234375],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":392}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[226,240]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-2938.09130859375,-1061.9820556640625],"size":[82,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":240}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":102,"type":"UnetLoaderGGUF","pos":[-4704.05126953125,-2224.073486328125],"size":[270,58],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF","widget_ue_connectable":{"unet_name":true}},"widgets_values":["flux1-krea-dev-Q8_0.gguf"],"color":"#232","bgcolor":"#353"},{"id":134,"type":"Note","pos":[-3021.593505859375,-2171.9794921875],"size":[379.7125244140625,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":142,"type":"ControlNetLoader","pos":[-2537.1923828125,-2165.13720703125],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-2530.215087890625,-2052.851806640625],"size":[295.9263610839844,58],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":68,"type":"DualCLIPLoader","pos":[-4726.869140625,-3107.125],"size":[270,130],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[48,49]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"DualCLIPLoader","widget_ue_connectable":{"clip_name1":true,"clip_name2":true,"type":true,"device":true}},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"]},{"id":67,"type":"CLIPTextEncode","pos":[-4327.50146484375,-3087.345947265625],"size":[263.2095642089844,88],"flags":{},"order":34,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":49},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":50}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[57]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":[""]},{"id":137,"type":"Note","pos":[-2941.13720703125,-3001.87841796875],"size":[821.1240234375,301.169189453125],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3381.989990234375,-1348.278564453125],"size":[82,26],"flags":{},"order":38,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":40,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[2.01,0.45000000000000007,1152,896],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["ae.safetensors"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":390},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":391},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":226},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[176]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.4000000000000001,0,0.30000000000000004],"color":"#232","bgcolor":"#353"},{"id":123,"type":"UNETLoader","pos":[-4714.58544921875,-2095.6484375],"size":[286.9432067871094,82],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[244]}],"title":"VL Model Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"UNETLoader","widget_ue_connectable":{"unet_name":true,"weight_dtype":true}},"widgets_values":["flux1-dev-fp8.safetensors","default"]},{"id":66,"type":"CLIPTextEncode","pos":[-4723.73681640625,-2913.925537109375],"size":[269.4439392089844,95.2074203491211],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":48},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[59]}],"title":"VL Negative Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":["dof, depth of field, blurry, overexposed, noise"],"color":"#232","bgcolor":"#353"},{"id":69,"type":"StringConcatenate","pos":[-3945.75146484375,-3395.608642578125],"size":[210,166],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":51},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":52},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[50]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StringConcatenate","widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true}},"widgets_values":["","",""]},{"id":76,"type":"Reroute","pos":[-4434.76708984375,-3780.007080078125],"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":233}],"outputs":[{"name":"","type":"IMAGE","links":[220,358]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-2517.88134765625,-1931.1724853515625],"size":[270,186],"flags":{"collapsed":false},"order":43,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":247},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":185},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":186},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[182]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.44000000000000006,0,0.5000000000000001],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-3005.232666015625,-1749.702392578125],"size":[271.0251159667969,234],"flags":{},"order":41,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":176},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[247]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","center crop (square)",0.45000000000000007,0.1],"color":"#232","bgcolor":"#353"},{"id":156,"type":"ResizeLongestToNode","pos":[-4761.35986328125,-3787.009033203125],"size":[270,82],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":371},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[233]}],"title":"VL Input Image Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[1024,"NEAREST"],"color":"#232","bgcolor":"#353"},{"id":147,"type":"SetShakkerLabsUnionControlNetType","pos":[-3874.751953125,-2085.452880859375],"size":[295.9263610839844,58],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":197},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["canny"]},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":36,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",25,1],"color":"#232","bgcolor":"#353"},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":45,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":44,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":182}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[123456,"fixed"],"color":"#232","bgcolor":"#353"},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":35,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":244},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7500000000000001,0,0.9000000000000002],"color":"#232","bgcolor":"#353"},{"id":71,"type":"DownloadAndLoadFlorence2Model","pos":[-4731.763671875,-3491.80322265625],"size":[318.6021423339844,130],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[54]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"DownloadAndLoadFlorence2Model","widget_ue_connectable":{"model":true,"precision":true,"attention":true}},"widgets_values":["gokaygokay/Florence-2-SD3-Captioner","fp16","eager",false]},{"id":236,"type":"LoadImageFromPath","pos":[-5167.123046875,-3774.165771484375],"size":[270,78],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[371]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Style","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["..."],"color":"#232","bgcolor":"#353"},{"id":235,"type":"LoadImageFromPath","pos":[-5045.77587890625,-1862.9239501953125],"size":[270,78],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[370]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Depth","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["C:\\ASSETS\\DepthMap\\DGN\\DGN.jpg"],"color":"#232","bgcolor":"#353"},{"id":74,"type":"PrimitiveString","pos":[-3947.171875,-3511.7890625],"size":[219.43800354003906,58],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[52]}],"title":"VL Post Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"PrimitiveString","widget_ue_connectable":{"value":true}},"widgets_values":["scene arranged on a ceiling, perspective looking straight. symmetric composition, 4k, uhd, sharp focus, detailed\", \"crisp\" \"all in sharp focus, everything in focus"],"color":"#232","bgcolor":"#353"},{"id":65,"type":"FluxGuidance","pos":[-4029.303955078125,-3079.2646484375],"size":[210,58],"flags":{"collapsed":false},"order":37,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":57},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[390]}],"title":"VL FluxGuidance","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[2.9000000000000004],"color":"#232","bgcolor":"#353"},{"id":75,"type":"FluxGuidance","pos":[-4327.35888671875,-2915.47021484375],"size":[210,58],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":59},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[185,391]}],"title":"VL FluxGuidance Negative","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[3],"color":"#232","bgcolor":"#353"},{"id":229,"type":"Reroute","pos":[-3644.4931640625,-3773.208984375],"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":358}],"outputs":[{"name":"","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":247,"type":"SaveImage","pos":[-890.008056640625,-1451.28173828125],"size":[226.36814880371094,58],"flags":{},"order":47,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":389},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"title":"VL Save Image Comfy","properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"SaveImage"},"widgets_values":["COMFY"],"color":"#233","bgcolor":"#355"},{"id":77,"type":"ResizeLongestToNode","pos":[-4680.1240234375,-1854.937255859375],"size":[259.6952819824219,82],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":370},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[392]}],"title":"VL Depth Input Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[1536,"NEAREST"],"color":"#232","bgcolor":"#353"},{"id":246,"type":"PrimitiveString","pos":[-886.2613525390625,-1797.227783203125],"size":[210,58],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[394]}],"title":"VL Output Path Original","properties":{"cnr_id":"comfy-core","ver":"0.3.55","Node name for S&R":"PrimitiveString","widget_ue_connectable":{}},"widgets_values":["ORIGINAL"],"color":"#233","bgcolor":"#355"},{"id":109,"type":"VAEDecode","pos":[-1343.404541015625,-1191.2152099609375],"size":[140,46],"flags":{},"order":46,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[389,395]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":248,"type":"SavePNGExactWithWorkflow","pos":[-878.7749633789062,-1667.4228515625],"size":[210,102],"flags":{},"order":48,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":395},{"localized_name":"alpha","name":"alpha","shape":7,"type":"MASK","link":null},{"localized_name":"filepath","name":"filepath","type":"STRING","widget":{"name":"filepath"},"link":394},{"localized_name":"overwrite","name":"overwrite","type":"BOOLEAN","widget":{"name":"overwrite"},"link":null}],"outputs":[],"properties":{"Node name for S&R":"SavePNGExactWithWorkflow"},"widgets_values":["absolute or relative .png path",true],"color":"#432","bgcolor":"#653"}],"links":[[48,68,0,66,0,"CLIP"],[49,68,0,67,0,"CLIP"],[50,69,0,67,1,"STRING"],[51,70,2,69,0,"STRING"],[52,74,0,69,1,"STRING"],[54,71,0,70,1,"FL2MODEL"],[57,67,0,65,0,"CONDITIONING"],[59,66,0,75,0,"CONDITIONING"],[116,115,0,108,1,"STYLE_MODEL"],[117,106,0,108,2,"CLIP_VISION"],[119,113,0,109,0,"LATENT"],[120,110,0,109,1,"VAE"],[121,118,0,112,0,"MODEL"],[122,117,0,113,0,"NOISE"],[123,124,0,113,1,"GUIDER"],[124,111,0,113,2,"SAMPLER"],[125,112,0,113,3,"SIGMAS"],[126,116,0,113,4,"LATENT"],[137,101,0,118,3,"INT"],[138,101,1,118,4,"INT"],[139,101,0,116,0,"INT"],[140,101,1,116,1,"INT"],[142,125,0,127,2,"CONTROL_NET"],[143,128,0,125,0,"CONTROL_NET"],[147,110,0,127,4,"VAE"],[166,138,0,124,0,"MODEL"],[167,138,0,118,0,"MODEL"],[176,127,0,108,0,"CONDITIONING"],[179,142,0,141,0,"CONTROL_NET"],[182,143,0,124,1,"CONDITIONING"],[185,75,0,143,1,"CONDITIONING"],[186,125,0,143,2,"CONTROL_NET"],[187,110,0,143,4,"VAE"],[197,128,0,147,0,"CONTROL_NET"],[206,148,0,143,3,"IMAGE"],[207,148,0,101,0,"IMAGE"],[220,76,0,70,0,"IMAGE"],[226,158,0,127,3,"IMAGE"],[233,156,0,76,0,"*"],[240,158,0,148,0,"*"],[241,164,0,165,1,"IP_ADAPTER_FLUX_INSTANTX"],[244,123,0,165,0,"MODEL"],[247,108,0,143,0,"CONDITIONING"],[253,165,0,169,0,"MODEL"],[254,169,0,138,0,"*"],[358,76,0,229,0,"*"],[361,229,0,108,3,"IMAGE"],[370,235,0,77,0,"IMAGE"],[371,236,0,156,0,"IMAGE"],[387,229,0,165,2,"IMAGE"],[389,109,0,247,0,"IMAGE"],[390,65,0,127,0,"CONDITIONING"],[391,75,0,127,1,"CONDITIONING"],[392,77,0,158,0,"*"],[394,246,0,248,2,"STRING"],[395,109,0,248,0,"IMAGE"]],"groups":[{"id":1,"title":"PROMPT","bounding":[-4777.6142578125,-3598.49560546875,1091.7342529296875,802.9776611328125],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"FLUX MODEL","bounding":[-4749.3330078125,-2326.40283203125,372.9299621582031,333.19903564453125],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"INPUT IMAGE STYLE","bounding":[-5200.791015625,-3880.3154296875,350.20843505859375,213.87449645996094],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"INPUT IMAGE DEPTH","bounding":[-5076.81884765625,-1948.157958984375,332.6519470214844,187.92123413085938],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"RESIZE","bounding":[-4710.21923828125,-1948.60009765625,312.5523681640625,205.3423614501953],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-3055.35888671875,-2249.9111328125,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-2555.17333984375,-2243.802001953125,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,332.4722595214844,518.8789672851562],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1167815779426566,"offset":[1587.3579480156238,1876.6074835536215]},"reroutes":[{"id":3,"pos":[-3170.392578125,-1860.9482421875],"linkIds":[176]}],"groupNodes":{"FLUX.1 Kontext Image Edit":{"nodes":[{"id":-1,"type":"Reroute","pos":[2354.87890625,-127.23468780517578],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"showOutputText":false,"horizontal":false},"index":0},{"id":-1,"type":"ReferenceLatent","pos":[2730,-220],"size":[197.712890625,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.38"},"index":1,"widgets_values":[]},{"id":-1,"type":"VAEDecode","pos":[3270,-110],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.38"},"index":2,"widgets_values":[]},{"id":-1,"type":"KSampler","pos":[2930,-110],"size":[315,262],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1],"index":3},{"id":-1,"type":"FluxGuidance","pos":[2940,-220],"size":[211.60000610351562,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[2.5],"index":4},{"id":-1,"type":"SaveImage","pos":[3490,-110],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ComfyUI"],"index":5},{"id":-1,"type":"CLIPTextEncode","pos":[2500,-110],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["there is a bright light"],"color":"#232","bgcolor":"#353","index":6},{"id":-1,"type":"CLIPTextEncode","pos":[2504.1435546875,97.9598617553711],"size":[422.84503173828125,164.31304931640625],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[""],"color":"#322","bgcolor":"#533","index":7},{"id":-1,"type":"UNETLoader","pos":[2630,-370],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["preliminary-dev-kontext.sft","default"],"color":"#223","bgcolor":"#335","index":8},{"id":-1,"type":"DualCLIPLoader","pos":[2100,-290],"size":[337.76861572265625,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[]}],"properties":{"Node name for S&R":"DualCLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"],"color":"#223","bgcolor":"#335","index":9},{"id":-1,"type":"VAELoader","pos":[2960,-370],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ae.safetensors"],"color":"#223","bgcolor":"#335","index":10}],"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"external":[],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"output":{"0":{"visible":true}},"input":{"denoise":{"visible":false},"cfg":{"visible":false}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}}},"VL Flux Kontext":{"nodes":[{"id":-1,"type":"Reroute","pos":[2354.87890625,-127.23468780517578],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"showOutputText":false,"horizontal":false},"index":0},{"id":-1,"type":"ReferenceLatent","pos":[2730,-220],"size":[197.712890625,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.38"},"index":1,"widgets_values":[]},{"id":-1,"type":"VAEDecode","pos":[3270,-110],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.38"},"index":2,"widgets_values":[]},{"id":-1,"type":"KSampler","pos":[2930,-110],"size":[315,262],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1],"index":3},{"id":-1,"type":"FluxGuidance","pos":[2940,-220],"size":[211.60000610351562,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[2.5],"index":4},{"id":-1,"type":"SaveImage","pos":[3490,-110],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ComfyUI"],"index":5},{"id":-1,"type":"CLIPTextEncode","pos":[2500,-110],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["there is a bright light"],"color":"#232","bgcolor":"#353","index":6},{"id":-1,"type":"CLIPTextEncode","pos":[2504.1435546875,97.9598617553711],"size":[422.84503173828125,164.31304931640625],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[""],"color":"#322","bgcolor":"#533","index":7},{"id":-1,"type":"UNETLoader","pos":[2630,-370],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["preliminary-dev-kontext.sft","default"],"color":"#223","bgcolor":"#335","index":8},{"id":-1,"type":"DualCLIPLoader","pos":[2100,-290],"size":[337.76861572265625,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[]}],"properties":{"Node name for S&R":"DualCLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"],"color":"#223","bgcolor":"#335","index":9},{"id":-1,"type":"VAELoader","pos":[2960,-370],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ae.safetensors"],"color":"#223","bgcolor":"#335","index":10}],"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"external":[],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"output":{"0":{"visible":true}},"input":{"denoise":{"visible":false},"cfg":{"visible":false}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}}}},"ue_links":[],"linkExtensions":[{"id":176,"parentId":3}]},"version":0.4}