{"id":"3f93ab78-c246-4e4b-b746-0888803934ea","revision":0,"last_node_id":267,"last_link_id":421,"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-3016.325439453125,-1917.17529296875],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-3023.66357421875,-2029.86279296875],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":158,"type":"Reroute","pos":[-3569.3505859375,-1055.771240234375],"size":[82,26],"flags":{},"order":32,"mode":0,"inputs":[{"name":"","type":"*","link":414}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[226,240]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-2938.09130859375,-1061.9820556640625],"size":[82,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":240}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":134,"type":"Note","pos":[-3021.593505859375,-2171.9794921875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3381.989990234375,-1348.278564453125],"size":[82,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":76,"type":"Reroute","pos":[-4434.76708984375,-3780.007080078125],"size":[75,26],"flags":{},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":233}],"outputs":[{"name":"","type":"IMAGE","links":[358]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":49,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":182}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":40,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":255,"type":"PreviewImage","pos":[-5162.7421875,-3594.05859375],"size":[307.2835388183594,246],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":403}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":45,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[1,0.5,1152,896],"color":"#232","bgcolor":"#353"},{"id":74,"type":"PrimitiveString","pos":[-4014.736083984375,-3507.182373046875],"size":[219.43800354003906,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[408]}],"title":"VL Post Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"PrimitiveString","widget_ue_connectable":{"value":true}},"widgets_values":["perspective looking up, objects arranged neatly and repeatedly using available space"],"color":"#232","bgcolor":"#353"},{"id":137,"type":"Note","pos":[-3037.41455078125,-2626.8984375],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":264,"type":"PreviewImage","pos":[-4632.2197265625,-1538.8798828125],"size":[140,246],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":413}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":44,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":390},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":391},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":226},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[176]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.4000000000000001,0,0.6],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-2517.88134765625,-1931.1724853515625],"size":[270,186],"flags":{"collapsed":false},"order":48,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":247},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":185},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[182]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.7],"color":"#232","bgcolor":"#353"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":36,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":416},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":69,"type":"StringConcatenate","pos":[-4013.31201171875,-3370.284423828125],"size":[210,166],"flags":{},"order":34,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":405},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":408},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[404,417]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StringConcatenate","widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true}},"widgets_values":["","",""]},{"id":109,"type":"VAEDecode","pos":[-1343.404541015625,-1191.2152099609375],"size":[140,46],"flags":{},"order":51,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":263,"type":"ImageBlur","pos":[-4637.9404296875,-1690.4791259765625],"size":[270,82],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":412},{"localized_name":"blur_radius","name":"blur_radius","type":"INT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"sigma","name":"sigma","type":"FLOAT","widget":{"name":"sigma"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[413,414]}],"title":"VL Image Blur Depth","properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"ImageBlur"},"widgets_values":[1,1],"color":"#233","bgcolor":"#355"},{"id":229,"type":"Reroute","pos":[-3749.374267578125,-3766.275146484375],"size":[75,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":358}],"outputs":[{"name":"","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":246,"type":"PrimitiveString","pos":[-935.2564697265625,-1524.0274658203125],"size":[210,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[396]}],"title":"VL Output Path Original","properties":{"cnr_id":"comfy-core","ver":"0.3.55","Node name for S&R":"PrimitiveString","widget_ue_connectable":{}},"widgets_values":["test.png"],"color":"#233","bgcolor":"#355"},{"id":265,"type":"PreviewImage","pos":[-933.5875854492188,-1409.9232177734375],"size":[408.70062255859375,281.3050842285156],"flags":{},"order":53,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":418}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":250,"type":"SaveImageDynamic","pos":[-950.1320190429688,-1699.74853515625],"size":[270,102],"flags":{},"order":52,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":397},{"localized_name":"alpha","name":"alpha","shape":7,"type":"MASK","link":null},{"localized_name":"filepath","name":"filepath","type":"STRING","widget":{"name":"filepath"},"link":396},{"localized_name":"overwrite","name":"overwrite","type":"BOOLEAN","widget":{"name":"overwrite"},"link":null}],"outputs":[],"properties":{"Node name for S&R":"SaveImageDynamic"},"widgets_values":["absolute or relative .png path",true],"color":"#432","bgcolor":"#653"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":47,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-2539.556396484375,-2165.13720703125],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-2533.366943359375,-2044.9716796875],"size":[295.9263610839844,58],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-3005.232666015625,-1749.702392578125],"size":[271.0251159667969,234],"flags":{},"order":46,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":176},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[247]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":251,"type":"UnetLoaderGGUF","pos":[-5063.626953125,-2061.660400390625],"size":[270,58],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[416]}],"title":"VL Model Loader GGUF","properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF"},"widgets_values":["flux1-dev-Q8_0.gguf"],"color":"#233","bgcolor":"#355"},{"id":102,"type":"UnetLoaderGGUF","pos":[-4697.74462890625,-2275.2939453125],"size":[270,58],"flags":{},"order":14,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF","widget_ue_connectable":{"unet_name":true}},"widgets_values":["flux1-krea-dev-Q8_0.gguf"],"color":"#232","bgcolor":"#353"},{"id":123,"type":"UNETLoader","pos":[-4697.24658203125,-2171.29638671875],"size":[265.6676940917969,82],"flags":{},"order":15,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[]}],"title":"VL Model Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"UNETLoader","widget_ue_connectable":{"unet_name":true,"weight_dtype":true}},"widgets_values":["flux1-dev-fp8.safetensors","default"]},{"id":156,"type":"ResizeLongestToNode","pos":[-4774.361328125,-3831.214599609375],"size":[270,82],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":371},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[233]}],"title":"VL Input Image Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[1024,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":267,"type":"ResizeLongestToNode","pos":[-4772.67041015625,-3694.734619140625],"size":[266.532958984375,82],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":420},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[421]}],"title":"VL Input Image Resize Florence","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[800,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":67,"type":"CLIPTextEncode","pos":[-4395.0693359375,-3094.2763671875],"size":[263.2095642089844,88],"flags":{},"order":37,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":398},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":404}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[57]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":[""]},{"id":65,"type":"FluxGuidance","pos":[-4086.38037109375,-3090.39013671875],"size":[210,58],"flags":{"collapsed":false},"order":41,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":57},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[390]}],"title":"VL FluxGuidance","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[2.9000000000000004],"color":"#232","bgcolor":"#353"},{"id":66,"type":"CLIPTextEncode","pos":[-4743.08203125,-2963.967041015625],"size":[226.5384979248047,96.16085815429688],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":399},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[59]}],"title":"VL Negative Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":["dof, depth of field, blurry, overexposed, noise, noisy"],"color":"#232","bgcolor":"#353"},{"id":75,"type":"FluxGuidance","pos":[-4473.3203125,-2954.564208984375],"size":[210,58],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":59},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[185,391]}],"title":"VL FluxGuidance Negative","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[3],"color":"#232","bgcolor":"#353"},{"id":235,"type":"LoadImageFromPath","pos":[-5045.77587890625,-1862.9239501953125],"size":[270,78],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[370]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Depth","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["C:\\Users\\SHA.ART\\Documents\\AltePost\\AltePostWien\\Assets\\Images\\DepthMap\\DGN\\DGN.png"],"color":"#232","bgcolor":"#353"},{"id":254,"type":"ShowText|pysssss","pos":[-3682.195556640625,-3093.751708984375],"size":[226.0553436279297,128.2686767578125],"flags":{"collapsed":false},"order":38,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":417}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"title":"VL Show Text","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ShowText|pysssss"},"widgets_values":[],"color":"#233","bgcolor":"#355"},{"id":70,"type":"Florence2Run","pos":[-4398.205078125,-3510.591552734375],"size":[332.3652038574219,364],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":421},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":54},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[405]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"title":"VL Florence2Run","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{"text_input":true,"task":true,"fill_mask":true,"keep_model_loaded":true,"max_new_tokens":true,"num_beams":true,"do_sample":true,"output_mask_select":true,"seed":true}},"widgets_values":["","prompt_gen_mixed_caption",true,false,256,3,true,"",399348640856758,"randomize"],"color":"#233","bgcolor":"#355"},{"id":77,"type":"ResizeLongestToNode","pos":[-4680.1240234375,-1854.937255859375],"size":[259.6952819824219,82],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":370},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[412]}],"title":"VL Depth Input Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[1280,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":252,"type":"DualCLIPLoader","pos":[-5152.9267578125,-3110.222412109375],"size":[270,130],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[398,399]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"],"color":"#223","bgcolor":"#335"},{"id":71,"type":"DownloadAndLoadFlorence2Model","pos":[-4753.26123046875,-3502.55224609375],"size":[318.6021423339844,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[54]}],"title":"VL DownloadAndLoadFlorence2Model","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"DownloadAndLoadFlorence2Model","widget_ue_connectable":{"model":true,"precision":true,"attention":true}},"widgets_values":["MiaoshouAI/Florence-2-large-PromptGen-v2.0","fp16","eager",true],"color":"#233","bgcolor":"#355"},{"id":236,"type":"LoadImageFromPath","pos":[-5167.123046875,-3774.165771484375],"size":[270,78],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[371,403,420]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Style","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["..."],"color":"#232","bgcolor":"#353"}],"links":[[54,71,0,70,1,"FL2MODEL"],[57,67,0,65,0,"CONDITIONING"],[59,66,0,75,0,"CONDITIONING"],[116,115,0,108,1,"STYLE_MODEL"],[117,106,0,108,2,"CLIP_VISION"],[119,113,0,109,0,"LATENT"],[120,110,0,109,1,"VAE"],[121,118,0,112,0,"MODEL"],[122,117,0,113,0,"NOISE"],[123,124,0,113,1,"GUIDER"],[124,111,0,113,2,"SAMPLER"],[125,112,0,113,3,"SIGMAS"],[126,116,0,113,4,"LATENT"],[137,101,0,118,3,"INT"],[138,101,1,118,4,"INT"],[139,101,0,116,0,"INT"],[140,101,1,116,1,"INT"],[142,125,0,127,2,"CONTROL_NET"],[143,128,0,125,0,"CONTROL_NET"],[147,110,0,127,4,"VAE"],[166,138,0,124,0,"MODEL"],[167,138,0,118,0,"MODEL"],[176,127,0,108,0,"CONDITIONING"],[179,142,0,141,0,"CONTROL_NET"],[182,143,0,124,1,"CONDITIONING"],[185,75,0,143,1,"CONDITIONING"],[187,110,0,143,4,"VAE"],[206,148,0,143,3,"IMAGE"],[207,148,0,101,0,"IMAGE"],[226,158,0,127,3,"IMAGE"],[233,156,0,76,0,"*"],[240,158,0,148,0,"*"],[241,164,0,165,1,"IP_ADAPTER_FLUX_INSTANTX"],[247,108,0,143,0,"CONDITIONING"],[253,165,0,169,0,"MODEL"],[254,169,0,138,0,"*"],[358,76,0,229,0,"*"],[361,229,0,108,3,"IMAGE"],[370,235,0,77,0,"IMAGE"],[371,236,0,156,0,"IMAGE"],[387,229,0,165,2,"IMAGE"],[390,65,0,127,0,"CONDITIONING"],[391,75,0,127,1,"CONDITIONING"],[396,246,0,250,2,"STRING"],[397,109,0,250,0,"IMAGE"],[398,252,0,67,0,"CLIP"],[399,252,0,66,0,"CLIP"],[403,236,0,255,0,"IMAGE"],[404,69,0,67,1,"STRING"],[405,70,2,69,0,"STRING"],[408,74,0,69,1,"STRING"],[412,77,0,263,0,"IMAGE"],[413,263,0,264,0,"IMAGE"],[414,263,0,158,0,"*"],[416,251,0,165,0,"MODEL"],[417,69,0,254,0,"STRING"],[418,109,0,265,0,"IMAGE"],[419,141,0,143,2,"CONTROL_NET"],[420,236,0,267,0,"IMAGE"],[421,267,0,70,0,"IMAGE"]],"groups":[{"id":1,"title":"PROMPT","bounding":[-4777.6142578125,-3598.49560546875,1008.9860229492188,750.2549438476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"FLUX MODEL","bounding":[-4722.53955078125,-2357.9228515625,312.2556457519531,296.1640625],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"INPUT IMAGE STYLE","bounding":[-5200.791015625,-3880.3154296875,350.20843505859375,213.87449645996094],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"INPUT IMAGE DEPTH","bounding":[-5076.81884765625,-1948.157958984375,332.6519470214844,187.92123413085938],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"RESIZE","bounding":[-4710.21923828125,-1948.60009765625,312.5523681640625,205.3423614501953],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-3055.35888671875,-2249.9111328125,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-2555.17333984375,-2243.802001953125,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":17,"title":"Prompt Combined","bounding":[-3723.742431640625,-3176.927490234375,308.970947265625,222.94740295410156],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.8390545288824038,"offset":[5276.404884611512,3836.927571111421]},"reroutes":[{"id":3,"pos":[-3170.392578125,-1860.9482421875],"linkIds":[176]}],"groupNodes":{"FLUX.1 Kontext Image Edit":{"nodes":[{"id":-1,"type":"Reroute","pos":[2354.87890625,-127.23468780517578],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"showOutputText":false,"horizontal":false},"index":0},{"id":-1,"type":"ReferenceLatent","pos":[2730,-220],"size":[197.712890625,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.38"},"index":1,"widgets_values":[]},{"id":-1,"type":"VAEDecode","pos":[3270,-110],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.38"},"index":2,"widgets_values":[]},{"id":-1,"type":"KSampler","pos":[2930,-110],"size":[315,262],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1],"index":3},{"id":-1,"type":"FluxGuidance","pos":[2940,-220],"size":[211.60000610351562,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[2.5],"index":4},{"id":-1,"type":"SaveImage","pos":[3490,-110],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ComfyUI"],"index":5},{"id":-1,"type":"CLIPTextEncode","pos":[2500,-110],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["there is a bright light"],"color":"#232","bgcolor":"#353","index":6},{"id":-1,"type":"CLIPTextEncode","pos":[2504.1435546875,97.9598617553711],"size":[422.84503173828125,164.31304931640625],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[""],"color":"#322","bgcolor":"#533","index":7},{"id":-1,"type":"UNETLoader","pos":[2630,-370],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["preliminary-dev-kontext.sft","default"],"color":"#223","bgcolor":"#335","index":8},{"id":-1,"type":"DualCLIPLoader","pos":[2100,-290],"size":[337.76861572265625,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[]}],"properties":{"Node name for S&R":"DualCLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"],"color":"#223","bgcolor":"#335","index":9},{"id":-1,"type":"VAELoader","pos":[2960,-370],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ae.safetensors"],"color":"#223","bgcolor":"#335","index":10}],"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"external":[],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"output":{"0":{"visible":true}},"input":{"denoise":{"visible":false},"cfg":{"visible":false}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}}},"VL Flux Kontext":{"nodes":[{"id":-1,"type":"Reroute","pos":[2354.87890625,-127.23468780517578],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"showOutputText":false,"horizontal":false},"index":0},{"id":-1,"type":"ReferenceLatent","pos":[2730,-220],"size":[197.712890625,46],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.38"},"index":1,"widgets_values":[]},{"id":-1,"type":"VAEDecode","pos":[3270,-110],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.38"},"index":2,"widgets_values":[]},{"id":-1,"type":"KSampler","pos":[2930,-110],"size":[315,262],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1],"index":3},{"id":-1,"type":"FluxGuidance","pos":[2940,-220],"size":[211.60000610351562,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[2.5],"index":4},{"id":-1,"type":"SaveImage","pos":[3490,-110],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ComfyUI"],"index":5},{"id":-1,"type":"CLIPTextEncode","pos":[2500,-110],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["there is a bright light"],"color":"#232","bgcolor":"#353","index":6},{"id":-1,"type":"CLIPTextEncode","pos":[2504.1435546875,97.9598617553711],"size":[422.84503173828125,164.31304931640625],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":[""],"color":"#322","bgcolor":"#533","index":7},{"id":-1,"type":"UNETLoader","pos":[2630,-370],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["preliminary-dev-kontext.sft","default"],"color":"#223","bgcolor":"#335","index":8},{"id":-1,"type":"DualCLIPLoader","pos":[2100,-290],"size":[337.76861572265625,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[]}],"properties":{"Node name for S&R":"DualCLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"],"color":"#223","bgcolor":"#335","index":9},{"id":-1,"type":"VAELoader","pos":[2960,-370],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["ae.safetensors"],"color":"#223","bgcolor":"#335","index":10}],"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"external":[],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"output":{"0":{"visible":true}},"input":{"denoise":{"visible":false},"cfg":{"visible":false}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}}}},"ue_links":[],"linkExtensions":[{"id":176,"parentId":3}]},"version":0.4}