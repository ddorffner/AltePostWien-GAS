{"id":"edfb1613-e549-4ed0-9d57-ada27e2d5dae","revision":0,"last_node_id":178,"last_link_id":259,"nodes":[{"id":2,"type":"UNETLoader","pos":[32.58647155761719,215.49510192871094],"size":[265.6676940917969,82],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[]}],"title":"VL Model Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"UNETLoader","widget_ue_connectable":{"unet_name":true,"weight_dtype":true}},"widgets_values":["flux1-dev-fp8.safetensors","default"]},{"id":11,"type":"PreviewImage","pos":[1865.06396484375,1243.393798828125],"size":[263.854736328125,246],"flags":{},"order":122,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":27}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":1,"type":"UnetLoaderGGUF","pos":[32.08842468261719,111.49652099609375],"size":[270,58],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF","widget_ue_connectable":{"unet_name":true}},"widgets_values":["flux1-krea-dev-Q8_0.gguf"],"color":"#232","bgcolor":"#353"},{"id":4,"type":"Reroute","pos":[1213.7205810546875,486.29107666015625],"size":[82,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[8,38,39,40,41]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":3,"type":"UnetLoaderGGUF","pos":[898.7855224609375,479.4838562011719],"size":[270,58],"flags":{"collapsed":false},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[1]}],"title":"VL Model Loader GGUF","properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF","widget_ue_connectable":{"unet_name":true}},"widgets_values":["flux1-dev-Q8_0.gguf"],"color":"#233","bgcolor":"#355"},{"id":12,"type":"PreviewImage","pos":[2209.4091796875,1330.5675048828125],"size":[351.6352844238281,248.45753479003906],"flags":{},"order":132,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":28}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":16,"type":"LoadImageFromPath","pos":[679.5209350585938,687.53955078125],"size":[270,78],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[6]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Depth","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["C:\\Users\\SHA.ART\\Documents\\AltePost\\AltePostWien\\Assets\\Images\\DepthMap\\HOF\\HOF.png"],"color":"#232","bgcolor":"#353"},{"id":39,"type":"PreviewImage","pos":[843.1782836914062,-264.45697021484375],"size":[243.28564453125,258],"flags":{},"order":82,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":67}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":55,"type":"Reroute","pos":[993.0745849609375,236.37001037597656],"size":[82,26],"flags":{},"order":84,"mode":0,"inputs":[{"name":"","type":"*","link":104}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[105]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":18,"type":"ResizeLongestToNode","pos":[659.5626220703125,120.2395248413086],"size":[270,82],"flags":{},"order":62,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":33},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[34,67,99,104,106]}],"title":"VL Input Image Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode"},"widgets_values":[512,"NEAREST"],"color":"#233","bgcolor":"#355"},{"id":56,"type":"PreviewImage","pos":[623.1326293945312,261.4856872558594],"size":[140,246],"flags":{},"order":85,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":106}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":17,"type":"LoadImageFromPath","pos":[309.0456848144531,115.25282287597656],"size":[270,78],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[33,35]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Style","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","Node name for S&R":"LoadImageFromPath","widget_ue_connectable":{"image":true}},"widgets_values":["C:\\Quellsammlung\\SHA-500-Quellbilder-2025-09-22\\csm_gemeinsam-gesund-essen-1_125a7b9720-1.jpeg"],"color":"#232","bgcolor":"#353"},{"id":19,"type":"Reroute","pos":[1143.4022216796875,96.62149047851562],"size":[82,26],"flags":{},"order":81,"mode":0,"inputs":[{"name":"","type":"*","link":34}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":15,"type":"f2f0a635-422e-4ee4-9601-c190685dd34c","pos":[1491.0458984375,1084.444091796875],"size":[210,138],"flags":{},"order":104,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":41},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":29},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":30},{"label":"image_depth","name":"","type":"*","link":31},{"label":"image_style","name":"_1","type":"*","link":105},{"name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":112}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[42]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[42123851236988]},{"id":58,"type":"Seed","pos":[312.2314147949219,730.43359375],"size":[270,142],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"seed","name":"seed","type":"SEED","links":null},{"localized_name":"number","name":"number","type":"NUMBER","links":null},{"localized_name":"float","name":"float","type":"FLOAT","links":null},{"localized_name":"int","name":"int","type":"INT","links":[108,109,110,111,112]}],"properties":{"cnr_id":"was-node-suite-comfyui","ver":"1.0.2","Node name for S&R":"Seed"},"widgets_values":[1,"randomize"]},{"id":9,"type":"9108596b-7c3b-483a-95bd-7659a1c4e237","pos":[1500.4185791015625,881.7618408203125],"size":[153.05859375,126],"flags":{},"order":103,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":40},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":17},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":18},{"label":"image_depth","name":"","type":"*","link":19},{"label":"image_style","name":"_1","type":"*","link":103},{"label":"noise_seed","name":"_2","type":"*","link":111}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[24]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":8,"type":"c554433b-0bc9-4f47-bd88-62159ee4d342","pos":[1501.7047119140625,490.281982421875],"size":[210,138],"flags":{},"order":101,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":38},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":13},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":14},{"label":"image_depth","name":"","type":"*","link":15},{"label":"image_style","name":"_1","type":"*","link":101},{"name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":109}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[22]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[42123851236988]},{"id":5,"type":"80daaf6c-2832-4e1d-823f-dd09d0c98ff0","pos":[1503.261474609375,676.9418334960938],"size":[210,138],"flags":{},"order":102,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":39},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":2},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":3},{"label":"image_depth","name":"","type":"*","link":4},{"label":"image_style","name":"_1","type":"*","link":102},{"name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":110}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[23]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[42123851236988]},{"id":54,"type":"9ad75703-6faf-4e8f-8139-581d1ebb23b4","pos":[1172.7081298828125,196.39076232910156],"size":[196.33358764648438,86],"flags":{},"order":83,"mode":0,"inputs":[{"label":"image_to_split","localized_name":"on_false","name":"on_false","type":"*","link":99}],"outputs":[{"name":"image1","type":"IMAGE","links":[100]},{"name":"image2","type":"IMAGE","links":[101]},{"name":"image3","type":"IMAGE","links":[102]},{"name":"image4","type":"IMAGE","links":[103]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60"},"widgets_values":[]},{"id":22,"type":"SaveImage","pos":[2287.42431640625,1019.6504516601562],"size":[270,270.00006103515625],"flags":{},"order":133,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":37},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"SaveImage"},"widgets_values":["hof_multi"]},{"id":13,"type":"PrimitiveInt","pos":[755.6472778320312,846.3506469726562],"size":[210,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PrimitiveInt","widget_ue_connectable":{}},"widgets_values":[512,"fixed"]},{"id":14,"type":"EmptyImage","pos":[688.0492553710938,988.9356079101562],"size":[270,130],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"INT","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[43]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"EmptyImage","widget_ue_connectable":{}},"widgets_values":[512,512,1,0]},{"id":21,"type":"Cubemap to Equirectangular","pos":[1963.2005615234375,997.9633178710938],"size":[278.1197204589844,130],"flags":{},"order":123,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":36},{"localized_name":"h","name":"h","type":"INT","widget":{"name":"h"},"link":null},{"localized_name":"w","name":"w","type":"INT","widget":{"name":"w"},"link":null},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_format","name":"cube_format","type":"COMBO","widget":{"name":"cube_format"},"link":null}],"outputs":[{"localized_name":"Equirectangular Image","name":"Equirectangular Image","type":"IMAGE","links":[28,37,113]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Cubemap to Equirectangular","widget_ue_connectable":{}},"widgets_values":[-1,-1,"bilinear","stack"]},{"id":59,"type":"PanoramaViewerNode","pos":[2766.08837890625,1000.49560546875],"size":[270,322],"flags":{},"order":134,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":113},{"localized_name":"max_width","name":"max_width","type":"INT","widget":{"name":"max_width"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfyui-preview360panorama","ver":"1.0.2","Node name for S&R":"PanoramaViewerNode"},"widgets_values":[4096,""]},{"id":6,"type":"be219d06-e28f-49a1-af21-84eed77c302f","pos":[1060.70654296875,647.3589477539062],"size":[210,126],"flags":{},"order":64,"mode":0,"inputs":[{"label":"image_depth","name":"image","type":"IMAGE","link":6},{"label":"face_size","name":"value","type":"INT","link":7}],"outputs":[{"label":"front","name":"Face Image","type":"IMAGE","links":[11]},{"label":"right","name":"Face Image_1","type":"IMAGE","links":[15]},{"label":"back","name":"Face Image_2","type":"IMAGE","links":[4]},{"label":"left","name":"Face Image_3","type":"IMAGE","links":[19]},{"label":"up","name":"Face Image_4","type":"IMAGE","links":null},{"label":"down","name":"Face Image_5","type":"IMAGE","links":[31]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":7,"type":"4573f0c6-ff76-48a2-919b-e3a4a356b27a","pos":[1496.141357421875,296.4584655761719],"size":[210,138],"flags":{},"order":100,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":8},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":9},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":10},{"label":"image_depth","name":"","type":"*","link":11},{"label":"image_style","name":"_1","type":"*","link":100},{"name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":108}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[21]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[42123851236988]},{"id":60,"type":"StyleModelLoader","pos":[3908.265380859375,-2502.3125],"size":[254.89520263671875,58],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[130]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":61,"type":"CLIPVisionLoader","pos":[3900.92724609375,-2615.000244140625],"size":[253.3074188232422,58],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[131]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":62,"type":"Note","pos":[3902.997314453125,-2757.1181640625],"size":[379.7125244140625,88],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":63,"type":"GetImageSize+","pos":[4703.66357421875,-2155.060546875],"size":[159.50155639648438,66],"flags":{},"order":68,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":114}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[115,136]},{"localized_name":"height","name":"height","type":"INT","links":[116,137]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":64,"type":"EmptySD3LatentImage","pos":[5049.63330078125,-2528.415771484375],"size":[210,106],"flags":{},"order":90,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":115},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":116},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":65,"type":"KSamplerSelect","pos":[5049.63330078125,-2344.99951171875],"size":[210,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[119]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":66,"type":"SamplerCustomAdvanced","pos":[5046.67822265625,-2014.71630859375],"size":[202.53378295898438,106],"flags":{},"order":139,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":117},{"localized_name":"guider","name":"guider","type":"GUIDER","link":118},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":119},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":120},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":121}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[138]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":67,"type":"BasicGuider","pos":[4701.9462890625,-2008.2791748046875],"size":[155.71875,46],"flags":{},"order":135,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":122},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":123}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[118]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":68,"type":"LoraLoaderModelOnly","pos":[2161.480712890625,-2342.816162109375],"size":[216.90994262695312,82],"flags":{},"order":89,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":124},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[140]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":69,"type":"VAELoader","pos":[2167.634033203125,-2204.208740234375],"size":[210,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[139,144,149]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":70,"type":"ApplyIPAdapterFlux","pos":[2185.517822265625,-2581.794921875],"size":[272.3912048339844,146],"flags":{},"order":67,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":125},{"localized_name":"image","name":"image","type":"IMAGE","link":126},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[124]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":71,"type":"IPAdapterFluxLoader","pos":[2175.040283203125,-2732.237060546875],"size":[270,106],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[125]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":72,"type":"SetShakkerLabsUnionControlNetType","pos":[2876.975341796875,-2622.276123046875],"size":[295.9263610839844,58],"flags":{},"order":65,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":127},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":73,"type":"ControlNetLoader","pos":[2882.868408203125,-2733.72265625],"size":[271.1938781738281,58],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[127]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":74,"type":"ControlNetLoader","pos":[3225.126708984375,-2741.447021484375],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":75,"type":"SetShakkerLabsUnionControlNetType","pos":[3231.316162109375,-2621.281494140625],"size":[295.9263610839844,58],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":128},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[147]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":76,"type":"ReduxAdvanced","pos":[3919.358154296875,-2334.839599609375],"size":[271.0251159667969,234],"flags":{},"order":124,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":129},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":130},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":131},{"localized_name":"image","name":"image","type":"IMAGE","link":132},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[123]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":77,"type":"ConditioningCombine","pos":[3624.6591796875,-2508.804443359375],"size":[211.060546875,46],"flags":{},"order":114,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":133},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":134}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":78,"type":"ModelSamplingFlux","pos":[4698.21240234375,-2346.45068359375],"size":[210,130],"flags":{},"order":115,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":135},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":136},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":137}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[141]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":79,"type":"VAEDecode","pos":[5050.14111328125,-1850.0823974609375],"size":[140,46],"flags":{},"order":143,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":138},{"localized_name":"vae","name":"vae","type":"VAE","link":139}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":80,"type":"Note","pos":[4484.71044921875,-2845.6953125],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":81,"type":"Note","pos":[3874.8154296875,-3197.572509765625],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":82,"type":"Reroute","pos":[2926.408203125,-2217.556396484375],"size":[82,26],"flags":{},"order":106,"mode":0,"inputs":[{"name":"","type":"*","link":140}],"outputs":[{"name":"MODEL","type":"MODEL","links":[122,135]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":83,"type":"Reroute","pos":[1938.935791015625,-2335.434814453125],"size":[82,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[126,132]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":84,"type":"Reroute","pos":[2234.66748046875,-2065.7421875],"size":[82,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[114,143,148]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":85,"type":"BasicScheduler","pos":[5049.63330078125,-2213.514404296875],"size":[213.8000030517578,106],"flags":{},"order":125,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":141},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[120]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":86,"type":"ControlNetApplyAdvanced","pos":[2892.5654296875,-2511.992431640625],"size":[219.66464233398438,186],"flags":{},"order":88,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":143},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":144},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[145]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[146]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":87,"type":"ControlNetApplyAdvanced","pos":[3246.8017578125,-2507.482177734375],"size":[270,186],"flags":{"collapsed":false},"order":105,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":145},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":146},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":147},{"localized_name":"image","name":"image","type":"IMAGE","link":148},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":149},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[133]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[134]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":88,"type":"RandomNoise","pos":[5054.48828125,-2668.8525390625],"size":[226.26657104492188,82],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[117]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":89,"type":"StyleModelLoader","pos":[4012.753173828125,-830.4287719726562],"size":[254.89520263671875,58],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":90,"type":"CLIPVisionLoader","pos":[4005.4150390625,-943.1165161132812],"size":[253.3074188232422,58],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":91,"type":"Note","pos":[4007.485107421875,-1085.234375],"size":[379.7125244140625,88],"flags":{},"order":23,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":92,"type":"GetImageSize+","pos":[4808.1513671875,-483.1767883300781],"size":[159.50155639648438,66],"flags":{},"order":72,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":150}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[151,172]},{"localized_name":"height","name":"height","type":"INT","links":[152,173]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":93,"type":"EmptySD3LatentImage","pos":[5154.12109375,-856.5320434570312],"size":[210,106],"flags":{},"order":93,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":151},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":152},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[157]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":94,"type":"KSamplerSelect","pos":[5154.12109375,-673.1157836914062],"size":[210,58],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[155]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":95,"type":"SamplerCustomAdvanced","pos":[5151.166015625,-342.8325500488281],"size":[202.53378295898438,106],"flags":{},"order":140,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":153},{"localized_name":"guider","name":"guider","type":"GUIDER","link":154},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":155},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":156},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":157}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[174]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":96,"type":"BasicGuider","pos":[4806.43408203125,-336.3954162597656],"size":[155.71875,46],"flags":{},"order":136,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":158},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":159}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[154]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":97,"type":"LoraLoaderModelOnly","pos":[2265.968505859375,-670.9324340820312],"size":[216.90994262695312,82],"flags":{},"order":92,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":160},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[176]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":98,"type":"VAELoader","pos":[2272.121826171875,-532.3250122070312],"size":[210,58],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[175,180,185]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":99,"type":"ApplyIPAdapterFlux","pos":[2290.005615234375,-909.9111938476562],"size":[272.3912048339844,146],"flags":{},"order":71,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":161},{"localized_name":"image","name":"image","type":"IMAGE","link":162},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[160]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":100,"type":"IPAdapterFluxLoader","pos":[2279.528076171875,-1060.353271484375],"size":[270,106],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[161]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":101,"type":"SetShakkerLabsUnionControlNetType","pos":[2981.463134765625,-950.3923950195312],"size":[295.9263610839844,58],"flags":{},"order":69,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":163},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[178]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":102,"type":"ControlNetLoader","pos":[2987.356201171875,-1061.8388671875],"size":[271.1938781738281,58],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[163]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":103,"type":"ControlNetLoader","pos":[3329.614501953125,-1069.563232421875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[164]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":104,"type":"SetShakkerLabsUnionControlNetType","pos":[3335.803955078125,-949.3977661132812],"size":[295.9263610839844,58],"flags":{},"order":70,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":164},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[183]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":105,"type":"ReduxAdvanced","pos":[4023.845947265625,-662.9558715820312],"size":[271.0251159667969,234],"flags":{},"order":126,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":165},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":null},{"localized_name":"image","name":"image","type":"IMAGE","link":168},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[159]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":106,"type":"ConditioningCombine","pos":[3729.14697265625,-836.9207153320312],"size":[211.060546875,46],"flags":{},"order":116,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":169},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":170}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[165]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":107,"type":"ModelSamplingFlux","pos":[4802.7001953125,-674.5669555664062],"size":[210,130],"flags":{},"order":117,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":171},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":172},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":173}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[177]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":108,"type":"VAEDecode","pos":[5154.62890625,-178.19863891601562],"size":[140,46],"flags":{},"order":144,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":174},{"localized_name":"vae","name":"vae","type":"VAE","link":175}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":109,"type":"Note","pos":[4589.1982421875,-1173.8115234375],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":29,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":111,"type":"Reroute","pos":[3030.89599609375,-545.6726684570312],"size":[82,26],"flags":{},"order":108,"mode":0,"inputs":[{"name":"","type":"*","link":176}],"outputs":[{"name":"MODEL","type":"MODEL","links":[158,171]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"Reroute","pos":[2043.4234619140625,-663.5510864257812],"size":[82,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[162,168]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":113,"type":"Reroute","pos":[2339.1552734375,-393.8584289550781],"size":[82,26],"flags":{},"order":31,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[150,179,184]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":114,"type":"BasicScheduler","pos":[5154.12109375,-541.6306762695312],"size":[213.8000030517578,106],"flags":{},"order":127,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":177},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[156]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":115,"type":"ControlNetApplyAdvanced","pos":[2997.05322265625,-840.1087036132812],"size":[219.66464233398438,186],"flags":{},"order":91,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":178},{"localized_name":"image","name":"image","type":"IMAGE","link":179},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":180},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[181]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[182]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":116,"type":"ControlNetApplyAdvanced","pos":[3351.28955078125,-835.5984497070312],"size":[270,186],"flags":{"collapsed":false},"order":107,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":181},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":182},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":183},{"localized_name":"image","name":"image","type":"IMAGE","link":184},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":185},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[169]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[170]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[5158.97607421875,-996.9688110351562],"size":[226.26657104492188,82],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[153]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":110,"type":"Note","pos":[3979.30322265625,-1525.688720703125],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":33,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":118,"type":"StyleModelLoader","pos":[4190.3583984375,-4280.29150390625],"size":[254.89520263671875,58],"flags":{},"order":34,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[202]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":119,"type":"CLIPVisionLoader","pos":[4183.0205078125,-4392.97900390625],"size":[253.3074188232422,58],"flags":{},"order":35,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[203]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":120,"type":"Note","pos":[4185.09033203125,-4535.09716796875],"size":[379.7125244140625,88],"flags":{},"order":36,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":121,"type":"GetImageSize+","pos":[4985.7568359375,-3933.03955078125],"size":[159.50155639648438,66],"flags":{},"order":76,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":186}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[187,208]},{"localized_name":"height","name":"height","type":"INT","links":[188,209]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":122,"type":"EmptySD3LatentImage","pos":[5331.7265625,-4306.39453125],"size":[210,106],"flags":{},"order":96,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":187},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":188},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[193]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":123,"type":"KSamplerSelect","pos":[5331.7265625,-4122.978515625],"size":[210,58],"flags":{},"order":37,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[191]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":124,"type":"SamplerCustomAdvanced","pos":[5328.771484375,-3792.6953125],"size":[202.53378295898438,106],"flags":{},"order":141,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":189},{"localized_name":"guider","name":"guider","type":"GUIDER","link":190},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":191},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":192},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":193}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[210]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":125,"type":"BasicGuider","pos":[4984.03955078125,-3786.258056640625],"size":[155.71875,46],"flags":{},"order":137,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":194},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":195}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[190]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":126,"type":"LoraLoaderModelOnly","pos":[2443.57373046875,-4120.794921875],"size":[216.90994262695312,82],"flags":{},"order":95,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":196},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[212]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":127,"type":"VAELoader","pos":[2449.72705078125,-3982.187744140625],"size":[210,58],"flags":{},"order":38,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[211,216,221]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":128,"type":"ApplyIPAdapterFlux","pos":[2467.61083984375,-4359.77392578125],"size":[272.3912048339844,146],"flags":{},"order":75,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":197},{"localized_name":"image","name":"image","type":"IMAGE","link":198},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[196]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":129,"type":"IPAdapterFluxLoader","pos":[2457.13330078125,-4510.2158203125],"size":[270,106],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[197]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":130,"type":"SetShakkerLabsUnionControlNetType","pos":[3159.068359375,-4400.2548828125],"size":[295.9263610839844,58],"flags":{},"order":73,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":199},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[214]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":131,"type":"ControlNetLoader","pos":[3164.96142578125,-4511.70166015625],"size":[271.1938781738281,58],"flags":{},"order":40,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[199]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":132,"type":"ControlNetLoader","pos":[3507.2197265625,-4519.42578125],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":41,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[200]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":133,"type":"SetShakkerLabsUnionControlNetType","pos":[3513.4091796875,-4399.26025390625],"size":[295.9263610839844,58],"flags":{},"order":74,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":200},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[219]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":134,"type":"ReduxAdvanced","pos":[4201.451171875,-4112.818359375],"size":[271.0251159667969,234],"flags":{},"order":128,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":201},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":202},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":203},{"localized_name":"image","name":"image","type":"IMAGE","link":204},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[195]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":135,"type":"ConditioningCombine","pos":[3906.752197265625,-4286.783203125],"size":[211.060546875,46],"flags":{},"order":118,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":205},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":206}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[201]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":136,"type":"ModelSamplingFlux","pos":[4980.3056640625,-4124.4296875],"size":[210,130],"flags":{},"order":119,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":207},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":208},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":209}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[213]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":137,"type":"VAEDecode","pos":[5332.234375,-3628.061279296875],"size":[140,46],"flags":{},"order":145,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":210},{"localized_name":"vae","name":"vae","type":"VAE","link":211}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":138,"type":"Note","pos":[4766.8037109375,-4623.67431640625],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":42,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":139,"type":"Note","pos":[4156.90869140625,-4975.55126953125],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":43,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":140,"type":"Reroute","pos":[3208.501220703125,-3995.535400390625],"size":[82,26],"flags":{},"order":110,"mode":0,"inputs":[{"name":"","type":"*","link":212}],"outputs":[{"name":"MODEL","type":"MODEL","links":[194,207]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":141,"type":"Reroute","pos":[2221.02880859375,-4113.41357421875],"size":[82,26],"flags":{},"order":44,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[198,204]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":142,"type":"Reroute","pos":[2516.760498046875,-3843.72119140625],"size":[82,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[186,215,220]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":143,"type":"BasicScheduler","pos":[5331.7265625,-3991.493408203125],"size":[213.8000030517578,106],"flags":{},"order":129,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":213},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[192]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":144,"type":"ControlNetApplyAdvanced","pos":[3174.658447265625,-4289.97119140625],"size":[219.66464233398438,186],"flags":{},"order":94,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":214},{"localized_name":"image","name":"image","type":"IMAGE","link":215},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":216},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[217]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[218]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":145,"type":"ControlNetApplyAdvanced","pos":[3528.894775390625,-4285.4609375],"size":[270,186],"flags":{"collapsed":false},"order":109,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":217},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":218},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":219},{"localized_name":"image","name":"image","type":"IMAGE","link":220},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":221},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[205]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[206]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":146,"type":"RandomNoise","pos":[5336.58154296875,-4446.83154296875],"size":[226.26657104492188,82],"flags":{},"order":46,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[189]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":147,"type":"StyleModelLoader","pos":[4475.60546875,-6072.49755859375],"size":[254.89520263671875,58],"flags":{},"order":47,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[238]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":148,"type":"CLIPVisionLoader","pos":[4468.26708984375,-6185.18505859375],"size":[253.3074188232422,58],"flags":{},"order":48,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[239]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":149,"type":"Note","pos":[4470.33740234375,-6327.30322265625],"size":[379.7125244140625,88],"flags":{},"order":49,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":150,"type":"GetImageSize+","pos":[5271.00341796875,-5725.24560546875],"size":[159.50155639648438,66],"flags":{},"order":80,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":222}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[223,244]},{"localized_name":"height","name":"height","type":"INT","links":[224,245]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":151,"type":"EmptySD3LatentImage","pos":[5616.97314453125,-6098.6005859375],"size":[210,106],"flags":{},"order":99,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":223},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":224},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[229]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":152,"type":"KSamplerSelect","pos":[5616.97314453125,-5915.1845703125],"size":[210,58],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[227]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":153,"type":"SamplerCustomAdvanced","pos":[5614.01806640625,-5584.9013671875],"size":[202.53378295898438,106],"flags":{},"order":142,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":225},{"localized_name":"guider","name":"guider","type":"GUIDER","link":226},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":227},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":228},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":229}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[246]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":154,"type":"BasicGuider","pos":[5269.2861328125,-5578.4638671875],"size":[155.71875,46],"flags":{},"order":138,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":230},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":231}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[226]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":155,"type":"LoraLoaderModelOnly","pos":[2728.82080078125,-5913.0009765625],"size":[216.90994262695312,82],"flags":{},"order":98,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":232},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[248]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":156,"type":"VAELoader","pos":[2734.97412109375,-5774.3935546875],"size":[210,58],"flags":{},"order":51,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[247,252,257]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":157,"type":"ApplyIPAdapterFlux","pos":[2752.85791015625,-6151.97998046875],"size":[272.3912048339844,146],"flags":{},"order":79,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":233},{"localized_name":"image","name":"image","type":"IMAGE","link":234},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[232]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":158,"type":"IPAdapterFluxLoader","pos":[2742.38037109375,-6302.421875],"size":[270,106],"flags":{},"order":52,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[233]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":159,"type":"SetShakkerLabsUnionControlNetType","pos":[3444.3154296875,-6192.4609375],"size":[295.9263610839844,58],"flags":{},"order":77,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":235},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[250]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":160,"type":"ControlNetLoader","pos":[3450.20849609375,-6303.90771484375],"size":[271.1938781738281,58],"flags":{},"order":53,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[235]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":161,"type":"ControlNetLoader","pos":[3792.466796875,-6311.6318359375],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":54,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[236]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":162,"type":"SetShakkerLabsUnionControlNetType","pos":[3798.65625,-6191.46630859375],"size":[295.9263610839844,58],"flags":{},"order":78,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":236},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[255]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":163,"type":"ReduxAdvanced","pos":[4486.6982421875,-5905.0244140625],"size":[271.0251159667969,234],"flags":{},"order":130,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":237},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":238},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":239},{"localized_name":"image","name":"image","type":"IMAGE","link":240},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[231]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":164,"type":"ConditioningCombine","pos":[4191.9990234375,-6078.9892578125],"size":[211.060546875,46],"flags":{},"order":120,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":241},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":242}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[237]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":165,"type":"ModelSamplingFlux","pos":[5265.55224609375,-5916.6357421875],"size":[210,130],"flags":{},"order":121,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":243},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":244},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":245}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[249]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":166,"type":"VAEDecode","pos":[5617.48095703125,-5420.26708984375],"size":[140,46],"flags":{},"order":146,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":246},{"localized_name":"vae","name":"vae","type":"VAE","link":247}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":167,"type":"Note","pos":[5052.05029296875,-6415.88037109375],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":55,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":168,"type":"Note","pos":[4442.1552734375,-6767.75732421875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":56,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":169,"type":"Reroute","pos":[3493.748291015625,-5787.7412109375],"size":[82,26],"flags":{},"order":112,"mode":0,"inputs":[{"name":"","type":"*","link":248}],"outputs":[{"name":"MODEL","type":"MODEL","links":[230,243]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":170,"type":"Reroute","pos":[2506.27587890625,-5905.61962890625],"size":[82,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[234,240]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":171,"type":"Reroute","pos":[2802.007568359375,-5635.92724609375],"size":[82,26],"flags":{},"order":58,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[222,251,256]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":172,"type":"BasicScheduler","pos":[5616.97314453125,-5783.69921875],"size":[213.8000030517578,106],"flags":{},"order":131,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":249},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[228]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":173,"type":"ControlNetApplyAdvanced","pos":[3459.905517578125,-6082.17724609375],"size":[219.66464233398438,186],"flags":{},"order":97,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":250},{"localized_name":"image","name":"image","type":"IMAGE","link":251},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":252},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[253]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[254]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":174,"type":"ControlNetApplyAdvanced","pos":[3814.141845703125,-6077.6669921875],"size":[270,186],"flags":{"collapsed":false},"order":111,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":253},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":254},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":255},{"localized_name":"image","name":"image","type":"IMAGE","link":256},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":257},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[241]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[242]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":175,"type":"RandomNoise","pos":[5621.828125,-6239.03759765625],"size":[226.26657104492188,82],"flags":{},"order":59,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[225]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":10,"type":"Stack Cubemap Faces","pos":[1825.402587890625,178.85406494140625],"size":[181.52011108398438,126],"flags":{},"order":113,"mode":0,"inputs":[{"localized_name":"Front","name":"Front","type":"IMAGE","link":21},{"localized_name":"Right","name":"Right","type":"IMAGE","link":22},{"localized_name":"Back","name":"Back","type":"IMAGE","link":23},{"localized_name":"Left","name":"Left","type":"IMAGE","link":24},{"localized_name":"Up","name":"Up","type":"IMAGE","link":43},{"localized_name":"Down","name":"Down","type":"IMAGE","link":42}],"outputs":[{"localized_name":"Cubemap stack","name":"Cubemap stack","type":"IMAGE","links":[27,36]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Stack Cubemap Faces","widget_ue_connectable":{}},"widgets_values":[]},{"id":176,"type":"SetNode","pos":[1429.2529296875,18.50412940979004],"size":[210,60],"flags":{},"order":86,"mode":0,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":258}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_POS","properties":{"previousName":"POS"},"widgets_values":["POS"],"color":"#332922","bgcolor":"#593930"},{"id":20,"type":"afa901e1-e2a8-425b-a65e-5f27d242d37d","pos":[1137.578369140625,338.4622497558594],"size":[210.66038513183594,91.74327087402344],"flags":{"collapsed":false},"order":63,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":35}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[2,9,13,17,29,258]},{"localized_name":"CONDITIONING_1","name":"CONDITIONING_1","type":"CONDITIONING","links":[3,10,14,18,30,259]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[],"color":"#432","bgcolor":"#653"},{"id":177,"type":"SetNode","pos":[1474.47802734375,140.5796661376953],"size":[210,60],"flags":{},"order":87,"mode":0,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":259}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_NEG","properties":{"previousName":"NEG"},"widgets_values":["NEG"],"color":"#332922","bgcolor":"#593930"},{"id":178,"type":"GetNode","pos":[1739.171142578125,-188.4884033203125],"size":[210,60],"flags":{},"order":60,"mode":0,"inputs":[],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":null}],"title":"Get_POS","properties":{},"widgets_values":["POS"],"color":"#332922","bgcolor":"#593930"}],"links":[[1,3,0,4,0,"*"],[2,20,0,5,1,"CONDITIONING"],[3,20,1,5,2,"CONDITIONING"],[4,6,2,5,3,"*"],[6,16,0,6,0,"IMAGE"],[7,13,0,6,1,"INT"],[8,4,0,7,0,"MODEL"],[9,20,0,7,1,"CONDITIONING"],[10,20,1,7,2,"CONDITIONING"],[11,6,0,7,3,"*"],[13,20,0,8,1,"CONDITIONING"],[14,20,1,8,2,"CONDITIONING"],[15,6,1,8,3,"*"],[17,20,0,9,1,"CONDITIONING"],[18,20,1,9,2,"CONDITIONING"],[19,6,3,9,3,"*"],[21,7,0,10,0,"IMAGE"],[22,8,0,10,1,"IMAGE"],[23,5,0,10,2,"IMAGE"],[24,9,0,10,3,"IMAGE"],[27,10,0,11,0,"IMAGE"],[28,21,0,12,0,"IMAGE"],[29,20,0,15,1,"CONDITIONING"],[30,20,1,15,2,"CONDITIONING"],[31,6,5,15,3,"*"],[33,17,0,18,0,"IMAGE"],[34,18,0,19,0,"*"],[35,17,0,20,0,"IMAGE"],[36,10,0,21,0,"IMAGE"],[37,21,0,22,0,"IMAGE"],[38,4,0,8,0,"MODEL"],[39,4,0,5,0,"MODEL"],[40,4,0,9,0,"MODEL"],[41,4,0,15,0,"MODEL"],[42,15,0,10,5,"IMAGE"],[43,14,0,10,4,"IMAGE"],[67,18,0,39,0,"IMAGE"],[99,18,0,54,0,"*"],[100,54,0,7,4,"*"],[101,54,1,8,4,"*"],[102,54,2,5,4,"*"],[103,54,3,9,4,"*"],[104,18,0,55,0,"*"],[105,55,0,15,4,"*"],[106,18,0,56,0,"IMAGE"],[108,58,3,7,5,"INT"],[109,58,3,8,5,"INT"],[110,58,3,5,5,"INT"],[111,58,3,9,5,"*"],[112,58,3,15,5,"INT"],[113,21,0,59,0,"IMAGE"],[114,84,0,63,0,"IMAGE"],[115,63,0,64,0,"INT"],[116,63,1,64,1,"INT"],[117,88,0,66,0,"NOISE"],[118,67,0,66,1,"GUIDER"],[119,65,0,66,2,"SAMPLER"],[120,85,0,66,3,"SIGMAS"],[121,64,0,66,4,"LATENT"],[122,82,0,67,0,"MODEL"],[123,76,0,67,1,"CONDITIONING"],[124,70,0,68,0,"MODEL"],[125,71,0,70,1,"IP_ADAPTER_FLUX_INSTANTX"],[126,83,0,70,2,"IMAGE"],[127,73,0,72,0,"CONTROL_NET"],[128,74,0,75,0,"CONTROL_NET"],[129,77,0,76,0,"CONDITIONING"],[130,60,0,76,1,"STYLE_MODEL"],[131,61,0,76,2,"CLIP_VISION"],[132,83,0,76,3,"IMAGE"],[133,87,0,77,0,"CONDITIONING"],[134,87,1,77,1,"CONDITIONING"],[135,82,0,78,0,"MODEL"],[136,63,0,78,3,"INT"],[137,63,1,78,4,"INT"],[138,66,0,79,0,"LATENT"],[139,69,0,79,1,"VAE"],[140,68,0,82,0,"*"],[141,78,0,85,0,"MODEL"],[142,72,0,86,2,"CONTROL_NET"],[143,84,0,86,3,"IMAGE"],[144,69,0,86,4,"VAE"],[145,86,0,87,0,"CONDITIONING"],[146,86,1,87,1,"CONDITIONING"],[147,75,0,87,2,"CONTROL_NET"],[148,84,0,87,3,"IMAGE"],[149,69,0,87,4,"VAE"],[150,113,0,92,0,"IMAGE"],[151,92,0,93,0,"INT"],[152,92,1,93,1,"INT"],[153,117,0,95,0,"NOISE"],[154,96,0,95,1,"GUIDER"],[155,94,0,95,2,"SAMPLER"],[156,114,0,95,3,"SIGMAS"],[157,93,0,95,4,"LATENT"],[158,111,0,96,0,"MODEL"],[159,105,0,96,1,"CONDITIONING"],[160,99,0,97,0,"MODEL"],[161,100,0,99,1,"IP_ADAPTER_FLUX_INSTANTX"],[162,112,0,99,2,"IMAGE"],[163,102,0,101,0,"CONTROL_NET"],[164,103,0,104,0,"CONTROL_NET"],[165,106,0,105,0,"CONDITIONING"],[168,112,0,105,3,"IMAGE"],[169,116,0,106,0,"CONDITIONING"],[170,116,1,106,1,"CONDITIONING"],[171,111,0,107,0,"MODEL"],[172,92,0,107,3,"INT"],[173,92,1,107,4,"INT"],[174,95,0,108,0,"LATENT"],[175,98,0,108,1,"VAE"],[176,97,0,111,0,"*"],[177,107,0,114,0,"MODEL"],[178,101,0,115,2,"CONTROL_NET"],[179,113,0,115,3,"IMAGE"],[180,98,0,115,4,"VAE"],[181,115,0,116,0,"CONDITIONING"],[182,115,1,116,1,"CONDITIONING"],[183,104,0,116,2,"CONTROL_NET"],[184,113,0,116,3,"IMAGE"],[185,98,0,116,4,"VAE"],[186,142,0,121,0,"IMAGE"],[187,121,0,122,0,"INT"],[188,121,1,122,1,"INT"],[189,146,0,124,0,"NOISE"],[190,125,0,124,1,"GUIDER"],[191,123,0,124,2,"SAMPLER"],[192,143,0,124,3,"SIGMAS"],[193,122,0,124,4,"LATENT"],[194,140,0,125,0,"MODEL"],[195,134,0,125,1,"CONDITIONING"],[196,128,0,126,0,"MODEL"],[197,129,0,128,1,"IP_ADAPTER_FLUX_INSTANTX"],[198,141,0,128,2,"IMAGE"],[199,131,0,130,0,"CONTROL_NET"],[200,132,0,133,0,"CONTROL_NET"],[201,135,0,134,0,"CONDITIONING"],[202,118,0,134,1,"STYLE_MODEL"],[203,119,0,134,2,"CLIP_VISION"],[204,141,0,134,3,"IMAGE"],[205,145,0,135,0,"CONDITIONING"],[206,145,1,135,1,"CONDITIONING"],[207,140,0,136,0,"MODEL"],[208,121,0,136,3,"INT"],[209,121,1,136,4,"INT"],[210,124,0,137,0,"LATENT"],[211,127,0,137,1,"VAE"],[212,126,0,140,0,"*"],[213,136,0,143,0,"MODEL"],[214,130,0,144,2,"CONTROL_NET"],[215,142,0,144,3,"IMAGE"],[216,127,0,144,4,"VAE"],[217,144,0,145,0,"CONDITIONING"],[218,144,1,145,1,"CONDITIONING"],[219,133,0,145,2,"CONTROL_NET"],[220,142,0,145,3,"IMAGE"],[221,127,0,145,4,"VAE"],[222,171,0,150,0,"IMAGE"],[223,150,0,151,0,"INT"],[224,150,1,151,1,"INT"],[225,175,0,153,0,"NOISE"],[226,154,0,153,1,"GUIDER"],[227,152,0,153,2,"SAMPLER"],[228,172,0,153,3,"SIGMAS"],[229,151,0,153,4,"LATENT"],[230,169,0,154,0,"MODEL"],[231,163,0,154,1,"CONDITIONING"],[232,157,0,155,0,"MODEL"],[233,158,0,157,1,"IP_ADAPTER_FLUX_INSTANTX"],[234,170,0,157,2,"IMAGE"],[235,160,0,159,0,"CONTROL_NET"],[236,161,0,162,0,"CONTROL_NET"],[237,164,0,163,0,"CONDITIONING"],[238,147,0,163,1,"STYLE_MODEL"],[239,148,0,163,2,"CLIP_VISION"],[240,170,0,163,3,"IMAGE"],[241,174,0,164,0,"CONDITIONING"],[242,174,1,164,1,"CONDITIONING"],[243,169,0,165,0,"MODEL"],[244,150,0,165,3,"INT"],[245,150,1,165,4,"INT"],[246,153,0,166,0,"LATENT"],[247,156,0,166,1,"VAE"],[248,155,0,169,0,"*"],[249,165,0,172,0,"MODEL"],[250,159,0,173,2,"CONTROL_NET"],[251,171,0,173,3,"IMAGE"],[252,156,0,173,4,"VAE"],[253,173,0,174,0,"CONDITIONING"],[254,173,1,174,1,"CONDITIONING"],[255,162,0,174,2,"CONTROL_NET"],[256,171,0,174,3,"IMAGE"],[257,156,0,174,4,"VAE"],[258,20,0,176,0,"*"],[259,20,1,177,0,"*"]],"groups":[{"id":2,"title":"INPUT IMAGE DEPTH","bounding":[650.9657592773438,601.8028564453125,332.6519470214844,187.92123413085938],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"APPLY DEPTH I","bounding":[2855.2734375,-2824.622802734375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Redux StyleTransfer","bounding":[3869.23193359375,-2835.049560546875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Sampler","bounding":[4985.75048828125,-2772.325439453125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"APPLY DEPTH II","bounding":[3209.509765625,-2820.111572265625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"IP Adapter","bounding":[2144.23828125,-2828.29150390625,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"APPLY CANNY","bounding":[2500.496826171875,-2824.850830078125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"APPLY DEPTH I","bounding":[2959.76123046875,-1152.739013671875,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Redux StyleTransfer","bounding":[3973.7197265625,-1163.165771484375,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"Sampler","bounding":[5090.23828125,-1100.441650390625,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":12,"title":"APPLY DEPTH II","bounding":[3313.99755859375,-1148.227783203125,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":13,"title":"IP Adapter","bounding":[2248.72607421875,-1156.40771484375,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"APPLY CANNY","bounding":[2604.984619140625,-1152.967041015625,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY DEPTH I","bounding":[3137.366455078125,-4602.6015625,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":16,"title":"Redux StyleTransfer","bounding":[4151.3251953125,-4613.0283203125,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":17,"title":"Sampler","bounding":[5267.84375,-4550.30419921875,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"APPLY DEPTH II","bounding":[3491.602783203125,-4598.09033203125,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":19,"title":"IP Adapter","bounding":[2426.331298828125,-4606.2705078125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"APPLY CANNY","bounding":[2782.58984375,-4602.82958984375,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":21,"title":"APPLY DEPTH I","bounding":[3422.613525390625,-6394.8076171875,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":22,"title":"Redux StyleTransfer","bounding":[4436.57177734375,-6405.234375,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":23,"title":"Sampler","bounding":[5553.09033203125,-6342.51025390625,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":24,"title":"APPLY DEPTH II","bounding":[3776.849853515625,-6390.29638671875,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":25,"title":"IP Adapter","bounding":[2711.578369140625,-6398.4765625,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":26,"title":"APPLY CANNY","bounding":[3067.8369140625,-6395.03564453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}}],"definitions":{"subgraphs":[{"id":"80daaf6c-2832-4e1d-823f-dd09d0c98ff0","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":447,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,160]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}},{"id":"e4d2e536-9a27-4783-be35-612c3da5d8eb","name":"noise_seed","type":"INT","linkIds":[447],"pos":{"0":-4636.9267578125,"1":-1706.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[140.8000030517578,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":447}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":447,"origin_id":-10,"origin_slot":5,"target_id":117,"target_slot":0,"type":"INT"}],"extra":{}},{"id":"be219d06-e28f-49a1-af21-84eed77c302f","version":1,"state":{"lastGroupId":22,"lastNodeId":298,"lastLinkId":496,"lastRerouteId":0},"revision":0,"config":{},"name":"Depth Split","inputNode":{"id":-10,"bounding":[-4056.5324479512533,-3265.556055097026,120,80]},"outputNode":{"id":-20,"bounding":[-2191.9084837385403,-3435.840597532229,120,160]},"inputs":[{"id":"7f5c2d3a-b39a-4ed3-9757-0e85f3e7f92b","name":"image","type":"IMAGE","linkIds":[466],"label":"image_depth","pos":{"0":-3956.532470703125,"1":-3245.55615234375}},{"id":"07c5dad5-980d-4c40-9b3d-94d1ef8dd203","name":"value","type":"INT","linkIds":[496],"label":"face_size","pos":{"0":-3956.532470703125,"1":-3225.55615234375}}],"outputs":[{"id":"25bcbdf6-5caf-4d03-8878-16d13e0f4387","name":"Face Image","type":"IMAGE","linkIds":[482],"label":"front","pos":{"0":-2171.908447265625,"1":-3415.840576171875}},{"id":"f67b00cf-2bd0-461b-936e-2ee89befd255","name":"Face Image_1","type":"IMAGE","linkIds":[483],"label":"right","pos":{"0":-2171.908447265625,"1":-3395.840576171875}},{"id":"9f62062f-1782-4eef-a362-e0827c329e60","name":"Face Image_2","type":"IMAGE","linkIds":[484],"label":"back","pos":{"0":-2171.908447265625,"1":-3375.840576171875}},{"id":"675a8b17-af47-44c7-8b77-0d3373514c7e","name":"Face Image_3","type":"IMAGE","linkIds":[485],"label":"left","pos":{"0":-2171.908447265625,"1":-3355.840576171875}},{"id":"33c764a7-fc63-4e1b-af16-bef6e352c393","name":"Face Image_4","type":"IMAGE","linkIds":[486],"label":"up","pos":{"0":-2171.908447265625,"1":-3335.840576171875}},{"id":"ef7c26f8-62e0-4ec7-bdf3-0d78c76363b5","name":"Face Image_5","type":"IMAGE","linkIds":[487],"label":"down","pos":{"0":-2171.908447265625,"1":-3315.840576171875}}],"widgets":[],"nodes":[{"id":284,"type":"ImageBlur","pos":[-3439.95166015625,-3354.366943359375],"size":[270,82],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":460},{"localized_name":"blur_radius","name":"blur_radius","type":"INT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"sigma","name":"sigma","type":"FLOAT","widget":{"name":"sigma"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[461]}],"title":"VL Image Blur Depth","properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"ImageBlur","widget_ue_connectable":{"blur_radius":true,"sigma":true}},"widgets_values":[1,1],"color":"#233","bgcolor":"#355"},{"id":279,"type":"ResizeLongestToNode","pos":[-3776.8466796875,-3357.309326171875],"size":[259.6952819824219,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":466},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[460]}],"title":"VL Depth Input Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[1280,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":287,"type":"Equirectangular to Face","pos":[-2712.880615234375,-3428.454833984375],"size":[270,106],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":463},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":492},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[484]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Back"]},{"id":288,"type":"Equirectangular to Face","pos":[-2712.75537109375,-3247.5869140625],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":464},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":493},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[485]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Left"]},{"id":295,"type":"Equirectangular to Face","pos":[-2705.210693359375,-3103.1474609375],"size":[270,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":488},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":494},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[486]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Up"]},{"id":296,"type":"Equirectangular to Face","pos":[-2702.5244140625,-2937.492919921875],"size":[270,106],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":489},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":495},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[487]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Down"]},{"id":286,"type":"Equirectangular to Face","pos":[-2724.9169921875,-3779.11279296875],"size":[270,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":462},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":490},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[482]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Front"]},{"id":285,"type":"Reroute","pos":[-3054.93115234375,-3345.782958984375],"size":[75,26],"flags":{},"order":2,"mode":0,"inputs":[{"name":"","type":"*","link":461}],"outputs":[{"name":"","type":"IMAGE","links":[462,463,464,465,488,489]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":289,"type":"Equirectangular to Face","pos":[-2712.4609375,-3607.989990234375],"size":[270,106],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":465},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":491},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[483]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","Node name for S&R":"Equirectangular to Face","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true}},"widgets_values":[512,"bilinear","Right"]},{"id":298,"type":"Reroute","pos":[-3090.420654296875,-3175.615234375],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":496}],"outputs":[{"name":"*","type":"*","links":[490,491,492,493,494,495]}],"properties":{"showOutputText":true,"horizontal":false}}],"groups":[],"links":[{"id":460,"origin_id":279,"origin_slot":0,"target_id":284,"target_slot":0,"type":"IMAGE"},{"id":461,"origin_id":284,"origin_slot":0,"target_id":285,"target_slot":0,"type":"*"},{"id":462,"origin_id":285,"origin_slot":0,"target_id":286,"target_slot":0,"type":"IMAGE"},{"id":463,"origin_id":285,"origin_slot":0,"target_id":287,"target_slot":0,"type":"IMAGE"},{"id":464,"origin_id":285,"origin_slot":0,"target_id":288,"target_slot":0,"type":"IMAGE"},{"id":465,"origin_id":285,"origin_slot":0,"target_id":289,"target_slot":0,"type":"IMAGE"},{"id":466,"origin_id":-10,"origin_slot":0,"target_id":279,"target_slot":0,"type":"IMAGE"},{"id":482,"origin_id":286,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":483,"origin_id":289,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"IMAGE"},{"id":484,"origin_id":287,"origin_slot":0,"target_id":-20,"target_slot":2,"type":"IMAGE"},{"id":485,"origin_id":288,"origin_slot":0,"target_id":-20,"target_slot":3,"type":"IMAGE"},{"id":486,"origin_id":295,"origin_slot":0,"target_id":-20,"target_slot":4,"type":"IMAGE"},{"id":487,"origin_id":296,"origin_slot":0,"target_id":-20,"target_slot":5,"type":"IMAGE"},{"id":488,"origin_id":285,"origin_slot":0,"target_id":295,"target_slot":0,"type":"IMAGE"},{"id":489,"origin_id":285,"origin_slot":0,"target_id":296,"target_slot":0,"type":"IMAGE"},{"id":490,"origin_id":298,"origin_slot":0,"target_id":286,"target_slot":1,"type":"INT"},{"id":491,"origin_id":298,"origin_slot":0,"target_id":289,"target_slot":1,"type":"INT"},{"id":492,"origin_id":298,"origin_slot":0,"target_id":287,"target_slot":1,"type":"INT"},{"id":493,"origin_id":298,"origin_slot":0,"target_id":288,"target_slot":1,"type":"INT"},{"id":494,"origin_id":298,"origin_slot":0,"target_id":295,"target_slot":1,"type":"INT"},{"id":495,"origin_id":298,"origin_slot":0,"target_id":296,"target_slot":1,"type":"INT"},{"id":496,"origin_id":-10,"origin_slot":1,"target_id":298,"target_slot":0,"type":"*"}],"extra":{}},{"id":"4573f0c6-ff76-48a2-919b-e3a4a356b27a","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":447,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,160]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}},{"id":"d3b2959a-7610-470f-bce1-e0cd2ad8f0d5","name":"noise_seed","type":"INT","linkIds":[447],"pos":{"0":-4636.9267578125,"1":-1706.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[140.8000030517578,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[-1339.0570068359375,-2025.7177734375],"size":[226.26657104492188,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":447}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":447,"origin_id":-10,"origin_slot":5,"target_id":117,"target_slot":0,"type":"INT"}],"extra":{}},{"id":"c554433b-0bc9-4f47-bd88-62159ee4d342","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":447,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,160]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}},{"id":"3d3acdac-7932-487f-83ad-0e035f1d0d17","name":"noise_seed","type":"INT","linkIds":[447],"pos":{"0":-4636.9267578125,"1":-1706.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[140.8000030517578,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":447}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":447,"origin_id":-10,"origin_slot":5,"target_id":117,"target_slot":0,"type":"INT"}],"extra":{}},{"id":"9108596b-7c3b-483a-95bd-7659a1c4e237","version":1,"state":{"lastGroupId":20,"lastNodeId":276,"lastLinkId":448,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,160]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}},{"id":"d2455e0c-f2fc-4d96-8fa8-b5b51732a092","name":"_2","type":"*","linkIds":[448],"label":"noise_seed","pos":{"0":-4636.9267578125,"1":-1706.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[140.8000030517578,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":447}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":276,"type":"Reroute","pos":[-3143.77734375,-1175.6346435546875],"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":448}],"outputs":[{"name":"*","type":"*","links":[447]}],"properties":{"showOutputText":true,"horizontal":false}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":447,"origin_id":276,"origin_slot":0,"target_id":117,"target_slot":0,"type":"INT"},{"id":448,"origin_id":-10,"origin_slot":5,"target_id":276,"target_slot":0,"type":"*"}],"extra":{}},{"id":"f2f0a635-422e-4ee4-9601-c190685dd34c","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":447,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,160]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}},{"id":"ee03aada-f562-4aea-8f7f-d00df05e8de5","name":"noise_seed","type":"INT","linkIds":[447],"pos":{"0":-4636.9267578125,"1":-1706.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StyleModelLoader","widget_ue_connectable":{"style_model_name":true}},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{"clip_name":true}},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true}},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{"sampler_name":true}},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","widget_ue_connectable":{"vae_name":true}},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"ApplyIPAdapterFlux","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","Node name for S&R":"IPAdapterFluxLoader","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true}},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{"control_net_name":true}},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"SetShakkerLabsUnionControlNetType","widget_ue_connectable":{"type":true}},"widgets_values":["depth"]},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","Node name for S&R":"ReduxAdvanced","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true}},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ConditioningCombine","widget_ue_connectable":{}},"widgets_values":[]},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true}},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[140.8000030517578,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"BasicScheduler","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true}},"widgets_values":["ddim_uniform",20,1],"color":"#232","bgcolor":"#353"},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.5,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true}},"widgets_values":[0.6,0.5,0.9],"color":"#232","bgcolor":"#353"},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":447}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"RandomNoise","widget_ue_connectable":{"noise_seed":true}},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":447,"origin_id":-10,"origin_slot":5,"target_id":117,"target_slot":0,"type":"INT"}],"extra":{}},{"id":"afa901e1-e2a8-425b-a65e-5f27d242d37d","version":1,"state":{"lastGroupId":18,"lastNodeId":268,"lastLinkId":423,"lastRerouteId":3},"revision":0,"config":{},"name":"S PROMPT","inputNode":{"id":-10,"bounding":[-6255.870148447033,-3223.6884907110452,120,60]},"outputNode":{"id":-20,"bounding":[-4462.681640625,-2833.119873046875,142.01171875,80]},"inputs":[{"id":"d7f6df11-85d7-4489-9f20-d3b0b4408981","name":"image","type":"IMAGE","linkIds":[423],"pos":{"0":-6155.8701171875,"1":-3203.6884765625}}],"outputs":[{"id":"c501872a-3c7e-4e8c-928e-ba5baa0d78db","name":"CONDITIONING","type":"CONDITIONING","linkIds":[390],"localized_name":"CONDITIONING","pos":{"0":-4442.681640625,"1":-2813.119873046875}},{"id":"4c6481d1-3158-45e6-bd96-30fd2c5cd133","name":"CONDITIONING_1","type":"CONDITIONING","linkIds":[185,391],"localized_name":"CONDITIONING_1","pos":{"0":-4442.681640625,"1":-2793.119873046875}}],"widgets":[],"nodes":[{"id":74,"type":"PrimitiveString","pos":[-5122.64794921875,-2926.024169921875],"size":[219.43800354003906,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[408]}],"title":"VL Post Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"PrimitiveString","widget_ue_connectable":{"value":true}},"widgets_values":["perspective looking up, objects arranged neatly and repeatedly using available space"],"color":"#232","bgcolor":"#353"},{"id":69,"type":"StringConcatenate","pos":[-5121.22412109375,-2789.126220703125],"size":[210,166],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":405},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":408},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[404,417]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"StringConcatenate","widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true}},"widgets_values":["","",""]},{"id":267,"type":"ResizeLongestToNode","pos":[-5880.5830078125,-3113.576416015625],"size":[266.532958984375,82],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":423},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[421]}],"title":"VL Input Image Resize Florence","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","Node name for S&R":"ResizeLongestToNode","widget_ue_connectable":{"size":true,"method":true}},"widgets_values":[800,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":67,"type":"CLIPTextEncode","pos":[-5502.98193359375,-2513.1181640625],"size":[263.2095642089844,88],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":398},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":404}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[57]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":[""]},{"id":65,"type":"FluxGuidance","pos":[-5194.29248046875,-2509.23193359375],"size":[210,58],"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":57},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[390]}],"title":"VL FluxGuidance","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[2.9000000000000004],"color":"#232","bgcolor":"#353"},{"id":66,"type":"CLIPTextEncode","pos":[-5850.99462890625,-2382.808837890625],"size":[226.5384979248047,96.16085815429688],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":399},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[59]}],"title":"VL Negative Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{"text":true}},"widgets_values":["dof, depth of field, blurry, overexposed, noise, noisy"],"color":"#232","bgcolor":"#353"},{"id":254,"type":"ShowText|pysssss","pos":[-4775.37109375,-2414.1923828125],"size":[226.0553436279297,128.2686767578125],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":417}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"title":"VL Show Text","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ShowText|pysssss","widget_ue_connectable":{}},"widgets_values":["A wooden table topped with a variety of healthy food items such as fruits, vegetables, nuts, grains, and dairy products, including whole foods such as bread, grapes, avocado, tomatoes, green peppers, and dried fruits, arranged in bowls on a rustic wooden surface. \n\nThere are various types of food items on the table, including a whole wheat bread with sesame seeds, a glass of milk, a plate of raw salmon, a bowl of green beans, a small bowl of walnuts, a wooden spoon, a pineapple, an avocado cut in half, and several small bowls filled with nuts and seeds. There are also a few fruits such as carrots, kiwi, broccoli, cauliflower, and grapes, as well as some nuts like almonds and peanuts.\n\nfresh vegetables, fruits, and grains, such as tomatoes, cucumbers, almonds, pistachios, carrots, and pineapples, are arranged around a wooden table, creating a colorful and vibrant display. the food items are arranged in an aesthetically pleasing way, making the image visually appealing and inviting. the wooden table provides a warm and rustic feel, with a focus on healthy eating habits and sources of vitamins and minerals, making it a great sourceperspective looking up, objects arranged neatly and repeatedly using available space"],"color":"#233","bgcolor":"#355"},{"id":71,"type":"DownloadAndLoadFlorence2Model","pos":[-5861.173828125,-2921.39404296875],"size":[318.6021423339844,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[54]}],"title":"VL DownloadAndLoadFlorence2Model","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"DownloadAndLoadFlorence2Model","widget_ue_connectable":{"model":true,"precision":true,"attention":true}},"widgets_values":["MiaoshouAI/Florence-2-large-PromptGen-v2.0","fp16","eager",true],"color":"#233","bgcolor":"#355"},{"id":268,"type":"Note","pos":[-4519.75146484375,-2401.56640625],"size":[140,60],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["needed for VL to extract prompt!"],"color":"#432","bgcolor":"#653"},{"id":252,"type":"DualCLIPLoader","pos":[-6229.6884765625,-2517.527587890625],"size":[270,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[398,399]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"DualCLIPLoader","widget_ue_connectable":{}},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"],"color":"#223","bgcolor":"#335"},{"id":75,"type":"FluxGuidance","pos":[-5486.84130859375,-2362.91796875],"size":[210,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":59},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[185,391]}],"title":"VL FluxGuidance Negative","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"FluxGuidance","widget_ue_connectable":{"guidance":true}},"widgets_values":[3],"color":"#232","bgcolor":"#353"},{"id":70,"type":"Florence2Run","pos":[-5506.11767578125,-2929.433349609375],"size":[332.3652038574219,364],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":421},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":54},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[405]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"title":"VL Florence2Run","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{"text_input":true,"task":true,"fill_mask":true,"keep_model_loaded":true,"max_new_tokens":true,"num_beams":true,"do_sample":true,"output_mask_select":true,"seed":true}},"widgets_values":["","prompt_gen_mixed_caption",true,false,256,3,true,"",722850967516258,"randomize"],"color":"#233","bgcolor":"#355"}],"groups":[{"id":1,"title":"PROMPT","bounding":[-5885.52685546875,-3017.33740234375,1008.9860229492188,750.2549438476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"INPUT IMAGE STYLE","bounding":[-6308.70361328125,-3299.1572265625,350.20843505859375,213.87449645996094],"color":"#3f789e","font_size":24,"flags":{}},{"id":17,"title":"Prompt Combined","bounding":[-4816.91796875,-2497.3681640625,523.9315185546875,239.41616821289062],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":405,"origin_id":70,"origin_slot":2,"target_id":69,"target_slot":0,"type":"STRING"},{"id":408,"origin_id":74,"origin_slot":0,"target_id":69,"target_slot":1,"type":"STRING"},{"id":398,"origin_id":252,"origin_slot":0,"target_id":67,"target_slot":0,"type":"CLIP"},{"id":404,"origin_id":69,"origin_slot":0,"target_id":67,"target_slot":1,"type":"STRING"},{"id":57,"origin_id":67,"origin_slot":0,"target_id":65,"target_slot":0,"type":"CONDITIONING"},{"id":399,"origin_id":252,"origin_slot":0,"target_id":66,"target_slot":0,"type":"CLIP"},{"id":59,"origin_id":66,"origin_slot":0,"target_id":75,"target_slot":0,"type":"CONDITIONING"},{"id":417,"origin_id":69,"origin_slot":0,"target_id":254,"target_slot":0,"type":"STRING"},{"id":421,"origin_id":267,"origin_slot":0,"target_id":70,"target_slot":0,"type":"IMAGE"},{"id":54,"origin_id":71,"origin_slot":0,"target_id":70,"target_slot":1,"type":"FL2MODEL"},{"id":390,"origin_id":65,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"CONDITIONING"},{"id":185,"origin_id":75,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"CONDITIONING"},{"id":391,"origin_id":75,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"CONDITIONING"},{"id":423,"origin_id":-10,"origin_slot":0,"target_id":267,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"9ad75703-6faf-4e8f-8139-581d1ebb23b4","version":1,"state":{"lastGroupId":2,"lastNodeId":60,"lastLinkId":111,"lastRerouteId":0},"revision":0,"config":{},"name":"ForceLandscapeAndSplit","inputNode":{"id":-10,"bounding":[1370.2052947998038,-698.9352813720704,120,60]},"outputNode":{"id":-20,"bounding":[2963.424514180911,-947.2441981188963,120,120]},"inputs":[{"id":"233438f0-b5ea-445b-b28c-95c69cde7372","name":"on_false","type":"*","linkIds":[61,75,45],"localized_name":"on_false","label":"image_to_split","pos":{"0":1470.205322265625,"1":-678.935302734375}}],"outputs":[{"id":"f363a0e1-f5f3-4503-9a8c-4c3c335e364f","name":"image1","type":"IMAGE","linkIds":[108],"pos":{"0":2983.424560546875,"1":-927.2442016601562}},{"id":"308c1443-11f1-4605-a62f-ca95a56cf19b","name":"image2","type":"IMAGE","linkIds":[109],"pos":{"0":2983.424560546875,"1":-907.2442016601562}},{"id":"7e15c6dd-0c22-4ea0-9c52-de204b23808e","name":"image3","type":"IMAGE","linkIds":[110],"pos":{"0":2983.424560546875,"1":-887.2442016601562}},{"id":"96d62310-36d9-45af-bdb1-981ad96d77a5","name":"image4","type":"IMAGE","linkIds":[111],"pos":{"0":2983.424560546875,"1":-867.2442016601562}}],"widgets":[],"nodes":[{"id":36,"type":"easy ifElse","pos":[2090.63720703125,-939.3418579101562],"size":[270,78],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"on_true","name":"on_true","type":"*","link":76},{"localized_name":"on_false","name":"on_false","type":"*","link":61},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":74}],"outputs":[{"localized_name":"*","name":"*","type":"*","links":[104]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.2.9","Node name for S&R":"easy ifElse"},"widgets_values":[false]},{"id":59,"type":"PreviewImage","pos":[2546.86962890625,-720.5021362304688],"size":[140,246],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":106}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":58,"type":"PreviewImage","pos":[2390.34423828125,-720.5021362304688],"size":[140,246],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":105}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":57,"type":"PreviewImage","pos":[2232.7529296875,-720.5021362304688],"size":[140,246],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":102}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":54,"type":"easy imageSplitGrid","pos":[2418.67626953125,-938.5636596679688],"size":[270,82],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":104},{"localized_name":"row","name":"row","type":"INT","widget":{"name":"row"},"link":null},{"localized_name":"column","name":"column","type":"INT","widget":{"name":"column"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[101]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.2.9","Node name for S&R":"easy imageSplitGrid"},"widgets_values":[1,4]},{"id":56,"type":"easy imagesSplitImage","pos":[2723.0458984375,-942.1338500976562],"size":[151.17538452148438,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":101}],"outputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","links":[102,108]},{"localized_name":"image2","name":"image2","type":"IMAGE","links":[105,109]},{"localized_name":"image3","name":"image3","type":"IMAGE","links":[106,110]},{"localized_name":"image4","name":"image4","type":"IMAGE","links":[107,111]},{"localized_name":"image5","name":"image5","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.2.9","Node name for S&R":"easy imagesSplitImage"},"widgets_values":[]},{"id":60,"type":"PreviewImage","pos":[2707.655029296875,-720.5021362304688],"size":[140,246],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":107}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":41,"type":"ImageRotate","pos":[1749.7081298828125,-940.5966796875],"size":[270,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":75},{"localized_name":"rotation","name":"rotation","type":"COMBO","widget":{"name":"rotation"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[76]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"ImageRotate"},"widgets_values":["90 degrees"]},{"id":25,"type":"GetImageSize","pos":[1626.765625,-694.5720825195312],"size":[140,124],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":45}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[73]},{"localized_name":"height","name":"height","type":"INT","links":[72]},{"localized_name":"batch_size","name":"batch_size","type":"INT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"GetImageSize"},"widgets_values":[]},{"id":40,"type":"easy compare","pos":[1802.285400390625,-682.954345703125],"size":[210,78],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"a","name":"a","type":"*","link":72},{"localized_name":"b","name":"b","type":"*","link":73},{"localized_name":"comparison","name":"comparison","type":"COMBO","widget":{"name":"comparison"},"link":null}],"outputs":[{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","links":[74]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.2.9","Node name for S&R":"easy compare"},"widgets_values":["a > b"]}],"groups":[],"links":[{"id":76,"origin_id":41,"origin_slot":0,"target_id":36,"target_slot":0,"type":"*"},{"id":74,"origin_id":40,"origin_slot":0,"target_id":36,"target_slot":2,"type":"BOOLEAN"},{"id":72,"origin_id":25,"origin_slot":1,"target_id":40,"target_slot":0,"type":"*"},{"id":73,"origin_id":25,"origin_slot":0,"target_id":40,"target_slot":1,"type":"*"},{"id":61,"origin_id":-10,"origin_slot":0,"target_id":36,"target_slot":1,"type":"*"},{"id":75,"origin_id":-10,"origin_slot":0,"target_id":41,"target_slot":0,"type":"IMAGE"},{"id":45,"origin_id":-10,"origin_slot":0,"target_id":25,"target_slot":0,"type":"IMAGE"},{"id":101,"origin_id":54,"origin_slot":0,"target_id":56,"target_slot":0,"type":"IMAGE"},{"id":102,"origin_id":56,"origin_slot":0,"target_id":57,"target_slot":0,"type":"IMAGE"},{"id":104,"origin_id":36,"origin_slot":0,"target_id":54,"target_slot":0,"type":"IMAGE"},{"id":105,"origin_id":56,"origin_slot":1,"target_id":58,"target_slot":0,"type":"IMAGE"},{"id":106,"origin_id":56,"origin_slot":2,"target_id":59,"target_slot":0,"type":"IMAGE"},{"id":107,"origin_id":56,"origin_slot":3,"target_id":60,"target_slot":0,"type":"IMAGE"},{"id":108,"origin_id":56,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":109,"origin_id":56,"origin_slot":1,"target_id":-20,"target_slot":1,"type":"IMAGE"},{"id":110,"origin_id":56,"origin_slot":2,"target_id":-20,"target_slot":2,"type":"IMAGE"},{"id":111,"origin_id":56,"origin_slot":3,"target_id":-20,"target_slot":3,"type":"IMAGE"}],"extra":{}}]},"config":{},"extra":{"ds":{"scale":0.7513148009015777,"offset":[192.37617102977848,508.9932205465854]}},"version":0.4}