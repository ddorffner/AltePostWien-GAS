{"id":"175c6824-826d-4783-a1a5-8e045a95b637","revision":0,"last_node_id":23,"last_link_id":34,"nodes":[{"id":1,"type":"PrimitiveString","pos":[-3008.78125,-2440.23779296875],"size":[210,58],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[2]}],"title":"VL Output Path Original","properties":{"cnr_id":"comfy-core","ver":"0.3.55","widget_ue_connectable":{},"Node name for S&R":"PrimitiveString"},"widgets_values":["test.png"],"color":"#233","bgcolor":"#355"},{"id":2,"type":"UnetLoaderGGUF","pos":[-4856.0859375,-1996.4757080078125],"size":[270,58],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","widget_ue_connectable":{"unet_name":true},"Node name for S&R":"UnetLoaderGGUF"},"widgets_values":["flux1-krea-dev-Q8_0.gguf"],"color":"#232","bgcolor":"#353"},{"id":3,"type":"UNETLoader","pos":[-4855.587890625,-1892.4771728515625],"size":[265.6676940917969,82],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[]}],"title":"VL Model Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"unet_name":true,"weight_dtype":true},"Node name for S&R":"UNETLoader"},"widgets_values":["flux1-dev-fp8.safetensors","default"]},{"id":4,"type":"SaveImageDynamic","pos":[-3023.65673828125,-2615.95849609375],"size":[270,102],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":1},{"localized_name":"alpha","name":"alpha","shape":7,"type":"MASK","link":null},{"localized_name":"filepath","name":"filepath","type":"STRING","widget":{"name":"filepath"},"link":2},{"localized_name":"overwrite","name":"overwrite","type":"BOOLEAN","widget":{"name":"overwrite"},"link":null}],"outputs":[],"properties":{"widget_ue_connectable":{"filepath":true,"overwrite":true},"Node name for S&R":"SaveImageDynamic"},"widgets_values":["absolute or relative .png path",true],"color":"#432","bgcolor":"#653"},{"id":5,"type":"UnetLoaderGGUF","pos":[-4866.15087890625,-2168.659423828125],"size":[270,58],"flags":{"collapsed":false},"order":4,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[4]}],"title":"VL Model Loader GGUF","properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","widget_ue_connectable":{"unet_name":true},"Node name for S&R":"UnetLoaderGGUF"},"widgets_values":["flux1-dev-Q8_0.gguf"],"color":"#233","bgcolor":"#355"},{"id":6,"type":"Reroute","pos":[-4436.6103515625,-2398.9228515625],"size":[82,26],"flags":{},"order":5,"mode":0,"inputs":[{"name":"","type":"*","link":3}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[15]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":7,"type":"Reroute","pos":[-4524.6455078125,-2168.163818359375],"size":[82,26],"flags":{},"order":6,"mode":0,"inputs":[{"name":"","type":"*","link":4}],"outputs":[{"name":"MODEL","type":"MODEL","links":[11]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":8,"type":"7252d76c-16d7-4008-8e43-561434a0061f","pos":[-4142.751953125,-2067.375244140625],"size":[153.05859375,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":5},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"label":"image_depth","name":"","type":"*","link":7},{"label":"image_style","name":"_1","type":"*","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[25]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":9,"type":"b488fb61-f5df-4c9e-89df-e05bc188ee11","pos":[-4822.2666015625,-2402.046142578125],"size":[210.66038513183594,91.74327087402344],"flags":{},"order":8,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":8}],"outputs":[{"label":"image","name":"","type":"IMAGE","links":[3]},{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[5,12,16,19,32]},{"localized_name":"CONDITIONING_1","name":"CONDITIONING_1","type":"CONDITIONING","links":[6,13,17,20,33]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":10,"type":"0182cb9b-80ec-4378-bdb3-eb05de0e8989","pos":[-4641.23193359375,-1589.108642578125],"size":[210,126],"flags":{},"order":9,"mode":0,"inputs":[{"label":"image_depth","name":"image","type":"IMAGE","link":9},{"label":"face_size","name":"value","type":"INT","link":10}],"outputs":[{"label":"front","name":"Face Image","type":"IMAGE","links":[14]},{"label":"right","name":"Face Image_1","type":"IMAGE","links":[18]},{"label":"back","name":"Face Image_2","type":"IMAGE","links":[7]},{"label":"left","name":"Face Image_3","type":"IMAGE","links":[21]},{"label":"up","name":"Face Image_4","type":"IMAGE","links":null},{"label":"down","name":"Face Image_5","type":"IMAGE","links":[34]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":11,"type":"2972ecbc-deb9-4273-9e9b-477634558e6a","pos":[-4148.9921875,-2385.378662109375],"size":[153.05859375,106],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":11},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":12},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":13},{"label":"image_depth","name":"","type":"*","link":14},{"label":"image_style","name":"_1","type":"*","link":15}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1,22,23]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":12,"type":"72559d7e-5bbb-4c32-8286-b6121e0a3f62","pos":[-4139.02880859375,-2224.9951171875],"size":[153.05859375,106],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":16},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":17},{"label":"image_depth","name":"","type":"*","link":18},{"label":"image_style","name":"_1","type":"*","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[24]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":13,"type":"8286f14d-0e2b-47ef-b359-57b90d86a31c","pos":[-4146.47509765625,-1909.7552490234375],"size":[153.05859375,106],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":19},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":20},{"label":"image_depth","name":"","type":"*","link":21},{"label":"image_style","name":"_1","type":"*","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[26]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":14,"type":"PreviewImage","pos":[-3007.1123046875,-2326.133544921875],"size":[408.70062255859375,281.3050842285156],"flags":{},"order":13,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":22}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"PreviewImage"}},{"id":15,"type":"Stack Cubemap Faces","pos":[-3783.215087890625,-1791.4046630859375],"size":[181.52011108398438,126],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"Front","name":"Front","type":"IMAGE","link":23},{"localized_name":"Right","name":"Right","type":"IMAGE","link":24},{"localized_name":"Back","name":"Back","type":"IMAGE","link":25},{"localized_name":"Left","name":"Left","type":"IMAGE","link":26},{"localized_name":"Up","name":"Up","type":"IMAGE","link":27},{"localized_name":"Down","name":"Down","type":"IMAGE","link":28}],"outputs":[{"localized_name":"Cubemap stack","name":"Cubemap stack","type":"IMAGE","links":[29,30]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{},"Node name for S&R":"Stack Cubemap Faces"}},{"id":16,"type":"Cubemap to Equirectangular","pos":[-3486.204345703125,-1781.784912109375],"size":[278.1197204589844,130],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":29},{"localized_name":"h","name":"h","type":"INT","widget":{"name":"h"},"link":null},{"localized_name":"w","name":"w","type":"INT","widget":{"name":"w"},"link":null},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_format","name":"cube_format","type":"COMBO","widget":{"name":"cube_format"},"link":null}],"outputs":[{"localized_name":"Equirectangular Image","name":"Equirectangular Image","type":"IMAGE","links":[31]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{},"Node name for S&R":"Cubemap to Equirectangular"},"widgets_values":[-1,-1,"bilinear","stack"]},{"id":17,"type":"PreviewImage","pos":[-3412.853759765625,-1449.902099609375],"size":[263.854736328125,222.0031280517578],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":30}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"PreviewImage"}},{"id":18,"type":"PreviewImage","pos":[-3086.9833984375,-1472.7490234375],"size":[351.6352844238281,248.45753479003906],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":31}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"PreviewImage"}},{"id":19,"type":"PrimitiveInt","pos":[-5080.0458984375,-1546.79345703125],"size":[210,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"PrimitiveInt"},"widgets_values":[512,"fixed"]},{"id":20,"type":"EmptyImage","pos":[-5147.64404296875,-1404.2083740234375],"size":[270,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"INT","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[28]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"EmptyImage"},"widgets_values":[512,512,1,0]},{"id":21,"type":"2268cea0-36c3-4269-80ce-d95aaf2f9f89","pos":[-4146.47509765625,-1728.554443359375],"size":[153.05859375,106],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":32},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":33},{"label":"image_depth","name":"","type":"*","link":34},{"label":"image_style","name":"_1","type":"*","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[27]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{}},"widgets_values":[]},{"id":22,"type":"LoadImageFromPath","pos":[-5217.53369140625,-2406.090576171875],"size":[270,78],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[8]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Style","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","widget_ue_connectable":{"image":true},"Node name for S&R":"LoadImageFromPath"},"widgets_values":["C:\\Quellsammlung\\2025-07-30_gewoelbe2\\0cec52af1f1dacd904b69f3f7479266f.jpg"],"color":"#232","bgcolor":"#353"},{"id":23,"type":"LoadImageFromPath","pos":[-5156.17236328125,-1705.6044921875],"size":[270,78],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[9]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Input Image Depth","properties":{"cnr_id":"ComfyUI_Ib_CustomNodes","ver":"59746dc1f9d5e3f52c13e21dba1aacb82d5f1c2a","widget_ue_connectable":{"image":true},"Node name for S&R":"LoadImageFromPath"},"widgets_values":["M:\\P\\ALTE_POST_WIEN\\repo\\AltePostWien\\Assets\\Images\\DepthMap\\HOF\\HOF.png"],"color":"#232","bgcolor":"#353"}],"links":[[1,11,0,4,0,"IMAGE"],[2,1,0,4,2,"STRING"],[3,9,0,6,0,"*"],[4,5,0,7,0,"*"],[5,9,1,8,1,"CONDITIONING"],[6,9,2,8,2,"CONDITIONING"],[7,10,2,8,3,"*"],[8,22,0,9,0,"IMAGE"],[9,23,0,10,0,"IMAGE"],[10,19,0,10,1,"INT"],[11,7,0,11,0,"MODEL"],[12,9,1,11,1,"CONDITIONING"],[13,9,2,11,2,"CONDITIONING"],[14,10,0,11,3,"*"],[15,6,0,11,4,"*"],[16,9,1,12,1,"CONDITIONING"],[17,9,2,12,2,"CONDITIONING"],[18,10,1,12,3,"*"],[19,9,1,13,1,"CONDITIONING"],[20,9,2,13,2,"CONDITIONING"],[21,10,3,13,3,"*"],[22,11,0,14,0,"IMAGE"],[23,11,0,15,0,"IMAGE"],[24,12,0,15,1,"IMAGE"],[25,8,0,15,2,"IMAGE"],[26,13,0,15,3,"IMAGE"],[27,21,0,15,4,"IMAGE"],[28,20,0,15,5,"IMAGE"],[29,15,0,16,0,"IMAGE"],[30,15,0,17,0,"IMAGE"],[31,16,0,18,0,"IMAGE"],[32,9,1,21,1,"CONDITIONING"],[33,9,2,21,2,"CONDITIONING"],[34,10,5,21,3,"*"]],"groups":[{"id":1,"title":"PROMPT","bounding":[-4884.67431640625,-2505.762939453125,396.8553161621094,257.28594970703125],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"INPUT IMAGE DEPTH","bounding":[-5184.7275390625,-1791.34130859375,332.6519470214844,187.92123413085938],"color":"#3f789e","font_size":24,"flags":{}}],"definitions":{"subgraphs":[{"id":"7252d76c-16d7-4008-8e43-561434a0061f","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":446,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,140]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"style_model_name":true},"Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"clip_name":true},"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"}},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"width":true,"height":true,"batch_size":true},"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"sampler_name":true},"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"SamplerCustomAdvanced"}},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"BasicGuider"}},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"lora_name":true,"strength_model":true},"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"vae_name":true},"Node name for S&R":"VAELoader"},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ApplyIPAdapterFlux"},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true},"Node name for S&R":"IPAdapterFluxLoader"},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"noise_seed":true},"Node name for S&R":"RandomNoise"},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true},"Node name for S&R":"BasicScheduler"},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4000000000000001,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0.5,0.8],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true},"Node name for S&R":"ReduxAdvanced"},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"ConditioningCombine"}},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true},"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"VAEDecode"}},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"b488fb61-f5df-4c9e-89df-e05bc188ee11","version":1,"state":{"lastGroupId":18,"lastNodeId":268,"lastLinkId":423,"lastRerouteId":3},"revision":0,"config":{},"name":"S PROMPT","inputNode":{"id":-10,"bounding":[-6255.870148447033,-3223.6884907110452,120,60]},"outputNode":{"id":-20,"bounding":[-4462.681640625,-2833.119873046875,142.01171875,100]},"inputs":[{"id":"d7f6df11-85d7-4489-9f20-d3b0b4408981","name":"image","type":"IMAGE","linkIds":[422,423],"pos":{"0":-6155.8701171875,"1":-3203.6884765625}}],"outputs":[{"id":"f7cb4c60-5db5-402c-aaf9-b986f629f8fa","name":"","type":"IMAGE","linkIds":[358],"label":"image","pos":{"0":-4442.681640625,"1":-2813.119873046875}},{"id":"c501872a-3c7e-4e8c-928e-ba5baa0d78db","name":"CONDITIONING","type":"CONDITIONING","linkIds":[390],"localized_name":"CONDITIONING","pos":{"0":-4442.681640625,"1":-2793.119873046875}},{"id":"4c6481d1-3158-45e6-bd96-30fd2c5cd133","name":"CONDITIONING_1","type":"CONDITIONING","linkIds":[185,391],"localized_name":"CONDITIONING_1","pos":{"0":-4442.681640625,"1":-2773.119873046875}}],"widgets":[],"nodes":[{"id":74,"type":"PrimitiveString","pos":[-5122.64794921875,-2926.024169921875],"size":[219.43800354003906,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[408]}],"title":"VL Post Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"value":true},"Node name for S&R":"PrimitiveString"},"widgets_values":["perspective looking up, objects arranged neatly and repeatedly using available space"],"color":"#232","bgcolor":"#353"},{"id":69,"type":"StringConcatenate","pos":[-5121.22412109375,-2789.126220703125],"size":[210,166],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":405},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":408},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[404,417]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true},"Node name for S&R":"StringConcatenate"},"widgets_values":["","",""]},{"id":156,"type":"ResizeLongestToNode","pos":[-5882.27392578125,-3250.056396484375],"size":[270,82],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":422},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[233]}],"title":"VL Input Image Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","widget_ue_connectable":{"size":true,"method":true},"Node name for S&R":"ResizeLongestToNode"},"widgets_values":[1024,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":267,"type":"ResizeLongestToNode","pos":[-5880.5830078125,-3113.576416015625],"size":[266.532958984375,82],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":423},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[421]}],"title":"VL Input Image Resize Florence","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","widget_ue_connectable":{"size":true,"method":true},"Node name for S&R":"ResizeLongestToNode"},"widgets_values":[800,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":67,"type":"CLIPTextEncode","pos":[-5502.98193359375,-2513.1181640625],"size":[263.2095642089844,88],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":398},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":404}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[57]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"text":true},"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":65,"type":"FluxGuidance","pos":[-5194.29248046875,-2509.23193359375],"size":[210,58],"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":57},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[390]}],"title":"VL FluxGuidance","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"guidance":true},"Node name for S&R":"FluxGuidance"},"widgets_values":[2.9000000000000004],"color":"#232","bgcolor":"#353"},{"id":66,"type":"CLIPTextEncode","pos":[-5850.99462890625,-2382.808837890625],"size":[226.5384979248047,96.16085815429688],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":399},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[59]}],"title":"VL Negative Prompt Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"text":true},"Node name for S&R":"CLIPTextEncode"},"widgets_values":["dof, depth of field, blurry, overexposed, noise, noisy"],"color":"#232","bgcolor":"#353"},{"id":254,"type":"ShowText|pysssss","pos":[-4775.37109375,-2414.1923828125],"size":[226.0553436279297,128.2686767578125],"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":417}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"title":"VL Show Text","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{},"Node name for S&R":"ShowText|pysssss"},"color":"#233","bgcolor":"#355"},{"id":70,"type":"Florence2Run","pos":[-5506.11767578125,-2929.433349609375],"size":[332.3652038574219,364],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":421},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":54},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[405]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"title":"VL Florence2Run","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","widget_ue_connectable":{"text_input":true,"task":true,"fill_mask":true,"keep_model_loaded":true,"max_new_tokens":true,"num_beams":true,"do_sample":true,"output_mask_select":true,"seed":true},"Node name for S&R":"Florence2Run"},"widgets_values":["","prompt_gen_mixed_caption",true,false,256,3,true,"",800589502035315,"randomize"],"color":"#233","bgcolor":"#355"},{"id":71,"type":"DownloadAndLoadFlorence2Model","pos":[-5861.173828125,-2921.39404296875],"size":[318.6021423339844,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[54]}],"title":"VL DownloadAndLoadFlorence2Model","properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","widget_ue_connectable":{"model":true,"precision":true,"attention":true},"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["MiaoshouAI/Florence-2-large-PromptGen-v2.0","fp16","eager",true],"color":"#233","bgcolor":"#355"},{"id":268,"type":"Note","pos":[-4519.75146484375,-2401.56640625],"size":[140,60],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["needed for VL to extract prompt!"],"color":"#432","bgcolor":"#653"},{"id":252,"type":"DualCLIPLoader","pos":[-6229.6884765625,-2517.527587890625],"size":[270,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[398,399]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","widget_ue_connectable":{},"Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"],"color":"#223","bgcolor":"#335"},{"id":75,"type":"FluxGuidance","pos":[-5486.84130859375,-2362.91796875],"size":[210,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":59},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[185,391]}],"title":"VL FluxGuidance Negative","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"guidance":true},"Node name for S&R":"FluxGuidance"},"widgets_values":[3],"color":"#232","bgcolor":"#353"},{"id":76,"type":"Reroute","pos":[-4994.45263671875,-3249.610595703125],"size":[75,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":233}],"outputs":[{"name":"","type":"IMAGE","links":[358]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":1,"title":"PROMPT","bounding":[-5885.52685546875,-3017.33740234375,1008.9860229492188,750.2549438476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"INPUT IMAGE STYLE","bounding":[-6308.70361328125,-3299.1572265625,350.20843505859375,213.87449645996094],"color":"#3f789e","font_size":24,"flags":{}},{"id":17,"title":"Prompt Combined","bounding":[-4816.91796875,-2497.3681640625,523.9315185546875,239.41616821289062],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":233,"origin_id":156,"origin_slot":0,"target_id":76,"target_slot":0,"type":"*"},{"id":405,"origin_id":70,"origin_slot":2,"target_id":69,"target_slot":0,"type":"STRING"},{"id":408,"origin_id":74,"origin_slot":0,"target_id":69,"target_slot":1,"type":"STRING"},{"id":398,"origin_id":252,"origin_slot":0,"target_id":67,"target_slot":0,"type":"CLIP"},{"id":404,"origin_id":69,"origin_slot":0,"target_id":67,"target_slot":1,"type":"STRING"},{"id":57,"origin_id":67,"origin_slot":0,"target_id":65,"target_slot":0,"type":"CONDITIONING"},{"id":399,"origin_id":252,"origin_slot":0,"target_id":66,"target_slot":0,"type":"CLIP"},{"id":59,"origin_id":66,"origin_slot":0,"target_id":75,"target_slot":0,"type":"CONDITIONING"},{"id":417,"origin_id":69,"origin_slot":0,"target_id":254,"target_slot":0,"type":"STRING"},{"id":421,"origin_id":267,"origin_slot":0,"target_id":70,"target_slot":0,"type":"IMAGE"},{"id":54,"origin_id":71,"origin_slot":0,"target_id":70,"target_slot":1,"type":"FL2MODEL"},{"id":358,"origin_id":76,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"*"},{"id":390,"origin_id":65,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"CONDITIONING"},{"id":185,"origin_id":75,"origin_slot":0,"target_id":-20,"target_slot":2,"type":"CONDITIONING"},{"id":391,"origin_id":75,"origin_slot":0,"target_id":-20,"target_slot":2,"type":"CONDITIONING"},{"id":422,"origin_id":-10,"origin_slot":0,"target_id":156,"target_slot":0,"type":"IMAGE"},{"id":423,"origin_id":-10,"origin_slot":0,"target_id":267,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"0182cb9b-80ec-4378-bdb3-eb05de0e8989","version":1,"state":{"lastGroupId":22,"lastNodeId":296,"lastLinkId":487,"lastRerouteId":0},"revision":0,"config":{},"name":"Depth Split","inputNode":{"id":-10,"bounding":[-4056.5324479512533,-3265.556055097026,120,80]},"outputNode":{"id":-20,"bounding":[-2191.9084837385403,-3435.840597532229,120,160]},"inputs":[{"id":"7f5c2d3a-b39a-4ed3-9757-0e85f3e7f92b","name":"image","type":"IMAGE","linkIds":[466],"label":"image_depth","pos":{"0":-3956.532470703125,"1":-3245.55615234375}},{"id":"07c5dad5-980d-4c40-9b3d-94d1ef8dd203","name":"value","type":"INT","linkIds":[475],"label":"face_size","pos":{"0":-3956.532470703125,"1":-3225.55615234375}}],"outputs":[{"id":"25bcbdf6-5caf-4d03-8878-16d13e0f4387","name":"Face Image","type":"IMAGE","linkIds":[482],"label":"front","pos":{"0":-2171.908447265625,"1":-3415.840576171875}},{"id":"f67b00cf-2bd0-461b-936e-2ee89befd255","name":"Face Image_1","type":"IMAGE","linkIds":[483],"label":"right","pos":{"0":-2171.908447265625,"1":-3395.840576171875}},{"id":"9f62062f-1782-4eef-a362-e0827c329e60","name":"Face Image_2","type":"IMAGE","linkIds":[484],"label":"back","pos":{"0":-2171.908447265625,"1":-3375.840576171875}},{"id":"675a8b17-af47-44c7-8b77-0d3373514c7e","name":"Face Image_3","type":"IMAGE","linkIds":[485],"label":"left","pos":{"0":-2171.908447265625,"1":-3355.840576171875}},{"id":"33c764a7-fc63-4e1b-af16-bef6e352c393","name":"Face Image_4","type":"IMAGE","linkIds":[486],"label":"up","pos":{"0":-2171.908447265625,"1":-3335.840576171875}},{"id":"ef7c26f8-62e0-4ec7-bdf3-0d78c76363b5","name":"Face Image_5","type":"IMAGE","linkIds":[487],"label":"down","pos":{"0":-2171.908447265625,"1":-3315.840576171875}}],"widgets":[],"nodes":[{"id":284,"type":"ImageBlur","pos":[-3439.95166015625,-3354.366943359375],"size":[270,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":460},{"localized_name":"blur_radius","name":"blur_radius","type":"INT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"sigma","name":"sigma","type":"FLOAT","widget":{"name":"sigma"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[461]}],"title":"VL Image Blur Depth","properties":{"cnr_id":"comfy-core","ver":"0.3.56","widget_ue_connectable":{"blur_radius":true,"sigma":true},"Node name for S&R":"ImageBlur"},"widgets_values":[1,1],"color":"#233","bgcolor":"#355"},{"id":279,"type":"ResizeLongestToNode","pos":[-3776.8466796875,-3357.309326171875],"size":[259.6952819824219,82],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":466},{"localized_name":"size","name":"size","type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[460]}],"title":"VL Depth Input Resize Longest","properties":{"cnr_id":"comfyui-logicutils","ver":"1.7.2","widget_ue_connectable":{"size":true,"method":true},"Node name for S&R":"ResizeLongestToNode"},"widgets_values":[1280,"BICUBIC"],"color":"#232","bgcolor":"#353"},{"id":285,"type":"Reroute","pos":[-3054.93115234375,-3345.782958984375],"size":[75,26],"flags":{},"order":4,"mode":0,"inputs":[{"name":"","type":"*","link":461}],"outputs":[{"name":"","type":"IMAGE","links":[462,463,464,465]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":294,"type":"Reroute","pos":[-3042.067626953125,-3230.6025390625],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":475}],"outputs":[{"name":"*","type":"*","links":[477,478,479,480]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":286,"type":"Equirectangular to Face","pos":[-2724.9169921875,-3779.11279296875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":462},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":480},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[482]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Front"]},{"id":289,"type":"Equirectangular to Face","pos":[-2712.4609375,-3607.989990234375],"size":[270,106],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":465},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":479},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[483]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Right"]},{"id":287,"type":"Equirectangular to Face","pos":[-2712.880615234375,-3428.454833984375],"size":[270,106],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":463},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":478},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[484]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Back"]},{"id":288,"type":"Equirectangular to Face","pos":[-2712.75537109375,-3247.5869140625],"size":[270,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":464},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":477},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[485]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Left"]},{"id":295,"type":"Equirectangular to Face","pos":[-2705.210693359375,-3103.1474609375],"size":[270,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":null},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":null},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[486]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Up"]},{"id":296,"type":"Equirectangular to Face","pos":[-2702.5244140625,-2937.492919921875],"size":[270,106],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"e_img","name":"e_img","type":"IMAGE","link":null},{"localized_name":"face_width","name":"face_width","type":"INT","widget":{"name":"face_width"},"link":null},{"localized_name":"padding_mode","name":"padding_mode","type":"COMBO","widget":{"name":"padding_mode"},"link":null},{"localized_name":"cube_face","name":"cube_face","type":"COMBO","widget":{"name":"cube_face"},"link":null}],"outputs":[{"localized_name":"Face Image","name":"Face Image","type":"IMAGE","links":[487]}],"properties":{"cnr_id":"comfyui-pytorch360convert","ver":"9a02ca09b055e823d8faa884b9e8b4d2c6bd1565","widget_ue_connectable":{"face_width":true,"padding_mode":true,"cube_face":true},"Node name for S&R":"Equirectangular to Face"},"widgets_values":[2048,"bilinear","Down"]}],"groups":[],"links":[{"id":460,"origin_id":279,"origin_slot":0,"target_id":284,"target_slot":0,"type":"IMAGE"},{"id":461,"origin_id":284,"origin_slot":0,"target_id":285,"target_slot":0,"type":"*"},{"id":462,"origin_id":285,"origin_slot":0,"target_id":286,"target_slot":0,"type":"IMAGE"},{"id":463,"origin_id":285,"origin_slot":0,"target_id":287,"target_slot":0,"type":"IMAGE"},{"id":464,"origin_id":285,"origin_slot":0,"target_id":288,"target_slot":0,"type":"IMAGE"},{"id":465,"origin_id":285,"origin_slot":0,"target_id":289,"target_slot":0,"type":"IMAGE"},{"id":466,"origin_id":-10,"origin_slot":0,"target_id":279,"target_slot":0,"type":"IMAGE"},{"id":475,"origin_id":-10,"origin_slot":1,"target_id":294,"target_slot":0,"type":"*"},{"id":477,"origin_id":294,"origin_slot":0,"target_id":288,"target_slot":1,"type":"INT"},{"id":478,"origin_id":294,"origin_slot":0,"target_id":287,"target_slot":1,"type":"INT"},{"id":479,"origin_id":294,"origin_slot":0,"target_id":289,"target_slot":1,"type":"INT"},{"id":480,"origin_id":294,"origin_slot":0,"target_id":286,"target_slot":1,"type":"INT"},{"id":482,"origin_id":286,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":483,"origin_id":289,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"IMAGE"},{"id":484,"origin_id":287,"origin_slot":0,"target_id":-20,"target_slot":2,"type":"IMAGE"},{"id":485,"origin_id":288,"origin_slot":0,"target_id":-20,"target_slot":3,"type":"IMAGE"},{"id":486,"origin_id":295,"origin_slot":0,"target_id":-20,"target_slot":4,"type":"IMAGE"},{"id":487,"origin_id":296,"origin_slot":0,"target_id":-20,"target_slot":5,"type":"IMAGE"}],"extra":{}},{"id":"2972ecbc-deb9-4273-9e9b-477634558e6a","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":446,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,140]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"style_model_name":true},"Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"clip_name":true},"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"}},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"width":true,"height":true,"batch_size":true},"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"sampler_name":true},"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"SamplerCustomAdvanced"}},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"BasicGuider"}},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"lora_name":true,"strength_model":true},"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"vae_name":true},"Node name for S&R":"VAELoader"},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ApplyIPAdapterFlux"},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true},"Node name for S&R":"IPAdapterFluxLoader"},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"noise_seed":true},"Node name for S&R":"RandomNoise"},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true},"Node name for S&R":"BasicScheduler"},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4000000000000001,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0.5,0.8],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true},"Node name for S&R":"ReduxAdvanced"},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"ConditioningCombine"}},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true},"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"VAEDecode"}},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"72559d7e-5bbb-4c32-8286-b6121e0a3f62","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":446,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,140]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"style_model_name":true},"Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"clip_name":true},"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"}},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"width":true,"height":true,"batch_size":true},"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"sampler_name":true},"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"SamplerCustomAdvanced"}},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"BasicGuider"}},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"lora_name":true,"strength_model":true},"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"vae_name":true},"Node name for S&R":"VAELoader"},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ApplyIPAdapterFlux"},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true},"Node name for S&R":"IPAdapterFluxLoader"},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"noise_seed":true},"Node name for S&R":"RandomNoise"},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true},"Node name for S&R":"BasicScheduler"},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4000000000000001,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0.5,0.8],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true},"Node name for S&R":"ReduxAdvanced"},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"ConditioningCombine"}},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true},"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"VAEDecode"}},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"8286f14d-0e2b-47ef-b359-57b90d86a31c","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":446,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,140]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"style_model_name":true},"Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"clip_name":true},"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"}},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"width":true,"height":true,"batch_size":true},"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"sampler_name":true},"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"SamplerCustomAdvanced"}},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"BasicGuider"}},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"lora_name":true,"strength_model":true},"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"vae_name":true},"Node name for S&R":"VAELoader"},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ApplyIPAdapterFlux"},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true},"Node name for S&R":"IPAdapterFluxLoader"},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"noise_seed":true},"Node name for S&R":"RandomNoise"},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true},"Node name for S&R":"BasicScheduler"},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4000000000000001,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0.5,0.8],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true},"Node name for S&R":"ReduxAdvanced"},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"ConditioningCombine"}},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true},"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"VAEDecode"}},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"2268cea0-36c3-4269-80ce-d95aaf2f9f89","version":1,"state":{"lastGroupId":20,"lastNodeId":275,"lastLinkId":446,"lastRerouteId":0},"revision":0,"config":{},"name":"RENDER","inputNode":{"id":-10,"bounding":[-4736.926996810892,-1826.3426236727207,120,140]},"outputNode":{"id":-20,"bounding":[-957.7113943373001,-1453.988371053353,120,60]},"inputs":[{"id":"5d989d55-d821-4e50-bf12-4869f242789d","name":"model","type":"MODEL","linkIds":[444],"localized_name":"model","pos":{"0":-4636.9267578125,"1":-1806.3426513671875}},{"id":"127d00e7-7a32-4f56-b865-01a7c53024b5","name":"positive","type":"CONDITIONING","linkIds":[423],"localized_name":"positive","pos":{"0":-4636.9267578125,"1":-1786.3426513671875}},{"id":"1e5595f5-1213-41cd-bcce-599f0f8753af","name":"negative","type":"CONDITIONING","linkIds":[425],"localized_name":"negative","pos":{"0":-4636.9267578125,"1":-1766.3426513671875}},{"id":"8ae92f04-f2d1-4a40-b0f4-af2ede216066","name":"","type":"*","linkIds":[441],"label":"image_depth","pos":{"0":-4636.9267578125,"1":-1746.3426513671875}},{"id":"eb65f072-70f8-4578-b2d7-8308df57b368","name":"_1","type":"*","linkIds":[446],"label":"image_style","pos":{"0":-4636.9267578125,"1":-1726.3426513671875}}],"outputs":[{"id":"06efb003-961a-49b9-8a80-f5d21123df74","name":"IMAGE","type":"IMAGE","linkIds":[397,418],"localized_name":"IMAGE","pos":{"0":-937.7113647460938,"1":-1433.9884033203125}}],"widgets":[],"nodes":[{"id":115,"type":"StyleModelLoader","pos":[-2485.284912109375,-1859.1778564453125],"size":[254.89520263671875,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"style_model_name":true},"Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":106,"type":"CLIPVisionLoader","pos":[-2492.623046875,-1971.8653564453125],"size":[253.3074188232422,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"clip_name":true},"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":134,"type":"Note","pos":[-2490.552978515625,-2113.983154296875],"size":[379.7125244140625,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl#"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"GetImageSize+","pos":[-1689.881591796875,-1511.9256591796875],"size":[159.50155639648438,66],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":207}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[137,139]},{"localized_name":"height","name":"height","type":"INT","links":[138,140]},{"localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"}},{"id":116,"type":"EmptySD3LatentImage","pos":[-1343.911865234375,-1885.2811279296875],"size":[210,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":139},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":140},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"width":true,"height":true,"batch_size":true},"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1152,896,1]},{"id":111,"type":"KSamplerSelect","pos":[-1343.911865234375,-1701.86474609375],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"sampler_name":true},"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":113,"type":"SamplerCustomAdvanced","pos":[-1346.8668212890625,-1371.581298828125],"size":[202.53378295898438,106],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":122},{"localized_name":"guider","name":"guider","type":"GUIDER","link":123},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":124},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":125},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":126}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[119]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"SamplerCustomAdvanced"}},{"id":124,"type":"BasicGuider","pos":[-1691.598876953125,-1365.1441650390625],"size":[155.71875,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":166},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"BasicGuider"}},{"id":169,"type":"LoraLoaderModelOnly","pos":[-4232.0703125,-1699.681396484375],"size":[216.90994262695312,82],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":253},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[254]}],"title":"VL Lora 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"lora_name":true,"strength_model":true},"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["FLUX-dev-lora-AntiBlur.safetensors",0.4000000000000001],"color":"#232","bgcolor":"#353"},{"id":110,"type":"VAELoader","pos":[-4225.9169921875,-1561.0738525390625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[120,147,187]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"vae_name":true},"Node name for S&R":"VAELoader"},"widgets_values":["flux-vae-bf16.safetensors"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"ApplyIPAdapterFlux","pos":[-4208.033203125,-1938.659912109375],"size":[272.3912048339844,146],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":444},{"localized_name":"ipadapter_flux","name":"ipadapter_flux","type":"IP_ADAPTER_FLUX_INSTANTX","link":241},{"localized_name":"image","name":"image","type":"IMAGE","link":387},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[253]}],"title":"VL IPAdapter","properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"weight":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ApplyIPAdapterFlux"},"widgets_values":[0.7,0.1,0.8],"color":"#232","bgcolor":"#353"},{"id":164,"type":"IPAdapterFluxLoader","pos":[-4218.5107421875,-2089.102294921875],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ipadapter","name":"ipadapter","type":"COMBO","widget":{"name":"ipadapter"},"link":null},{"localized_name":"clip_vision","name":"clip_vision","type":"COMBO","widget":{"name":"clip_vision"},"link":null},{"localized_name":"provider","name":"provider","type":"COMBO","widget":{"name":"provider"},"link":null}],"outputs":[{"localized_name":"ipadapterFlux","name":"ipadapterFlux","type":"IP_ADAPTER_FLUX_INSTANTX","links":[241]}],"properties":{"cnr_id":"ComfyUI-IPAdapter-Flux","ver":"eef22b6875ddaf10f13657248b8123d6bdec2014","widget_ue_connectable":{"ipadapter":true,"clip_vision":true,"provider":true},"Node name for S&R":"IPAdapterFluxLoader"},"widgets_values":["ip-adapter.bin","google/siglip-so400m-patch14-384","cuda"]},{"id":117,"type":"RandomNoise","pos":[-1350.8067626953125,-2034.8983154296875],"size":[226.26657104492188,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[122]}],"title":"VL Seed Gen","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"noise_seed":true},"Node name for S&R":"RandomNoise"},"widgets_values":[42123851236988,"fixed"],"color":"#232","bgcolor":"#353"},{"id":112,"type":"BasicScheduler","pos":[-1343.911865234375,-1570.3795166015625],"size":[213.8000030517578,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":121},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[125]}],"title":"VL Scheduler","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"scheduler":true,"steps":true,"denoise":true},"Node name for S&R":"BasicScheduler"},"widgets_values":["ddim_uniform",40,1],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetShakkerLabsUnionControlNetType","pos":[-3516.574951171875,-1979.1412353515625],"size":[295.9263610839844,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":143},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[142]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":128,"type":"ControlNetLoader","pos":[-3510.681884765625,-2090.587890625],"size":[271.1938781738281,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":142,"type":"ControlNetLoader","pos":[-3168.423583984375,-2098.31201171875],"size":[290.8933410644531,61.581722259521484],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[179]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"control_net_name":true},"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union_shakker.safetensors"]},{"id":141,"type":"SetShakkerLabsUnionControlNetType","pos":[-3162.234130859375,-1978.146728515625],"size":[295.9263610839844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":179},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[419]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","widget_ue_connectable":{"type":true},"Node name for S&R":"SetShakkerLabsUnionControlNetType"},"widgets_values":["depth"]},{"id":127,"type":"ControlNetApplyAdvanced","pos":[-3500.98486328125,-1868.857666015625],"size":[219.66464233398438,186],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":423},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":425},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":142},{"localized_name":"image","name":"image","type":"IMAGE","link":442},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":147},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[435]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[436]}],"title":"VL ControlNet Depth 1","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4000000000000001,0,0.55],"color":"#232","bgcolor":"#353"},{"id":143,"type":"ControlNetApplyAdvanced","pos":[-3146.74853515625,-1864.3475341796875],"size":[270,186],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":435},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":436},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":419},{"localized_name":"image","name":"image","type":"IMAGE","link":206},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":187},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[437]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[438]}],"title":"VL ControlNet Depth 2","properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"strength":true,"start_percent":true,"end_percent":true},"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0.5,0.8],"color":"#232","bgcolor":"#353"},{"id":108,"type":"ReduxAdvanced","pos":[-2474.192138671875,-1691.7049560546875],"size":[271.0251159667969,234],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":431},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":116},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":361},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"downsampling_factor","name":"downsampling_factor","type":"FLOAT","widget":{"name":"downsampling_factor"},"link":null},{"localized_name":"downsampling_function","name":"downsampling_function","type":"COMBO","widget":{"name":"downsampling_function"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"autocrop_margin","name":"autocrop_margin","shape":7,"type":"FLOAT","widget":{"name":"autocrop_margin"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[439]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"VL Redux","properties":{"cnr_id":"ComfyUI_AdvancedRefluxControl","ver":"2b95c2c866399ca1914b4da486fe52808f7a9c60","widget_ue_connectable":{"downsampling_factor":true,"downsampling_function":true,"mode":true,"weight":true,"autocrop_margin":true},"Node name for S&R":"ReduxAdvanced"},"widgets_values":[2,"bilinear","keep aspect ratio",0.5,0.1],"color":"#232","bgcolor":"#353"},{"id":271,"type":"ConditioningCombine","pos":[-2768.89111328125,-1865.669677734375],"size":[211.060546875,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"conditioning_1","name":"conditioning_1","type":"CONDITIONING","link":437},{"localized_name":"conditioning_2","name":"conditioning_2","type":"CONDITIONING","link":438}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[431]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","widget_ue_connectable":{},"Node name for S&R":"ConditioningCombine"}},{"id":118,"type":"ModelSamplingFlux","pos":[-1695.3328857421875,-1703.31591796875],"size":[210,130],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":167},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":137},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":138}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{"max_shift":true,"base_shift":true,"width":true,"height":true},"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[0.9,0.3,1152,896],"color":"#232","bgcolor":"#353"},{"id":109,"type":"VAEDecode","pos":[-1343.404296875,-1206.9473876953125],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":119},{"localized_name":"vae","name":"vae","type":"VAE","link":120}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[397,418]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","widget_ue_connectable":{},"Node name for S&R":"VAEDecode"}},{"id":139,"type":"Note","pos":[-1908.83447265625,-2202.560546875],"size":[430.62799072265625,438.9825134277344],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"ModelSamplingFlux","properties":{"widget_ue_connectable":{}},"widgets_values":["MAX_SHIFT\n\nThe max_shift parameter defines the upper limit of the shift that can be applied during the sampling process. It allows you to control the extent of the adjustment, with a default value of 1.15. The minimum value is 0.0, and the maximum is 100.0, with increments of 0.01. This parameter is important for setting the boundaries of the sampling shift, ensuring that it remains within a desired range.\nbase_shift\n\nBASE_SHIFT\nThe base_shift parameter sets the initial shift value for the sampling process. It has a default value of 0.5, with a minimum of 0.0 and a maximum of 100.0, adjustable in steps of 0.01. This parameter is essential for establishing the starting point of the shift, which can influence the overall sampling behavior and results.\nwidth\n\nWIDTH\nThe width parameter specifies the width of the model's input resolution. It has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is critical for determining the horizontal dimension of the model's input, which affects the calculation of the sampling shift.\nheight\n\nHEIGHT\nThe height parameter defines the height of the model's input resolution. Similar to the width, it has a default value of 1024, with a minimum of 16 and a maximum defined by the system's maximum resolution, adjustable in steps of 8. This parameter is important for setting the vertical dimension of the model's input, which also plays a role in the shift calculation."],"color":"#432","bgcolor":"#653"},{"id":137,"type":"Note","pos":[-2518.73486328125,-2554.43701171875],"size":[401.1846618652344,330.01116943359375],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Redux Advanced","properties":{"widget_ue_connectable":{}},"widgets_values":["\n    downsampling_factor: This is the most important parameter and it determines how strongly the conditioning image influences the generated image. In fact, the strength value in the StyleModelApplySimple node is just changing this single value from 1 (strongest), to 5 (weakest). The \"medium\" strength option is a downsampling_factor of 3. You can also choose other values up to 9.\n    downsampling_function: These functions are the same as in any graphics program when you resize an image. The default is \"area\", but \"bicubic\" and \"nearest_exact\" are also interesting choices. The chosen function can very much change the outcome, so its worth experimenting a bit.\n    mode: How the image should be cropped:\n        center crop (square) is what Redux is doing by default: cropping your image to a square image and then resizing it to 384x384 pixel\n        keep aspect ratio will add a padding to your image such that it gets square. It will adjust the mask (or generate one if no one is given) such that the padding is not part of the mask. Note that the final image is still resized to 384x384, so your image will be compressed more if you add more padding.\n        autocrop with mask will crop your image in a way that the masked area is in the center. It will also crop your image such that only the masked area and a margin remains. The margin is specified as the autocrop_margin parameter and is relative to the total size of the image. So autocropping with a margin of 0.1 means the crop is done on the masked area + 10% of the image on each side.\n    weight: This option downscales the Redux tokens by the given value squared. This is very similar to the \"conditioning average\" approach many people use to reduce the effect of Redux on the generated image. This is an alternative way of reducing Redux' impact, but downsampling works better in most cases. However, feel free to also experiment with this value, or even with a combination of both: downsampling AND weight.\n    autocrop_margin this parameter is only used when \"autocrop with mask\" is selected as mode\n"],"color":"#432","bgcolor":"#653"},{"id":138,"type":"Reroute","pos":[-3467.14208984375,-1574.421630859375],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":254}],"outputs":[{"name":"MODEL","type":"MODEL","links":[166,167]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":229,"type":"Reroute","pos":[-4454.61572265625,-1692.300048828125],"size":[82,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":446}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[361,387]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}},{"id":148,"type":"Reroute","pos":[-4158.88330078125,-1422.607177734375],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206,207,442]}],"properties":{"showOutputText":true,"horizontal":false,"widget_ue_connectable":{}}}],"groups":[{"id":2,"title":"APPLY DEPTH I","bounding":[-3538.27685546875,-2181.488037109375,332.406982421875,513.9579467773438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Redux StyleTransfer","bounding":[-2524.318359375,-2191.914794921875,448.40380859375,751.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Sampler","bounding":[-1407.7945556640625,-2129.190673828125,322.8236389160156,1015.38916015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"APPLY DEPTH II","bounding":[-3184.04052734375,-2176.976806640625,357.59844970703125,527.0908813476562],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"IP Adapter","bounding":[-4249.3125,-2185.15673828125,329.5335998535156,409.45648193359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"APPLY CANNY","bounding":[-3893.053466796875,-2181.716064453125,207.5697784423828,80],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"OUTPUT","bounding":[-1012.071533203125,-1508.7342529296875,208.5541229248047,162.7377471923828],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":207,"origin_id":148,"origin_slot":0,"target_id":101,"target_slot":0,"type":"IMAGE"},{"id":139,"origin_id":101,"origin_slot":0,"target_id":116,"target_slot":0,"type":"INT"},{"id":140,"origin_id":101,"origin_slot":1,"target_id":116,"target_slot":1,"type":"INT"},{"id":122,"origin_id":117,"origin_slot":0,"target_id":113,"target_slot":0,"type":"NOISE"},{"id":123,"origin_id":124,"origin_slot":0,"target_id":113,"target_slot":1,"type":"GUIDER"},{"id":124,"origin_id":111,"origin_slot":0,"target_id":113,"target_slot":2,"type":"SAMPLER"},{"id":125,"origin_id":112,"origin_slot":0,"target_id":113,"target_slot":3,"type":"SIGMAS"},{"id":126,"origin_id":116,"origin_slot":0,"target_id":113,"target_slot":4,"type":"LATENT"},{"id":166,"origin_id":138,"origin_slot":0,"target_id":124,"target_slot":0,"type":"MODEL"},{"id":439,"origin_id":108,"origin_slot":0,"target_id":124,"target_slot":1,"type":"CONDITIONING"},{"id":253,"origin_id":165,"origin_slot":0,"target_id":169,"target_slot":0,"type":"MODEL"},{"id":241,"origin_id":164,"origin_slot":0,"target_id":165,"target_slot":1,"type":"IP_ADAPTER_FLUX_INSTANTX"},{"id":387,"origin_id":229,"origin_slot":0,"target_id":165,"target_slot":2,"type":"IMAGE"},{"id":121,"origin_id":118,"origin_slot":0,"target_id":112,"target_slot":0,"type":"MODEL"},{"id":143,"origin_id":128,"origin_slot":0,"target_id":125,"target_slot":0,"type":"CONTROL_NET"},{"id":179,"origin_id":142,"origin_slot":0,"target_id":141,"target_slot":0,"type":"CONTROL_NET"},{"id":142,"origin_id":125,"origin_slot":0,"target_id":127,"target_slot":2,"type":"CONTROL_NET"},{"id":442,"origin_id":148,"origin_slot":0,"target_id":127,"target_slot":3,"type":"IMAGE"},{"id":147,"origin_id":110,"origin_slot":0,"target_id":127,"target_slot":4,"type":"VAE"},{"id":435,"origin_id":127,"origin_slot":0,"target_id":143,"target_slot":0,"type":"CONDITIONING"},{"id":436,"origin_id":127,"origin_slot":1,"target_id":143,"target_slot":1,"type":"CONDITIONING"},{"id":419,"origin_id":141,"origin_slot":0,"target_id":143,"target_slot":2,"type":"CONTROL_NET"},{"id":206,"origin_id":148,"origin_slot":0,"target_id":143,"target_slot":3,"type":"IMAGE"},{"id":187,"origin_id":110,"origin_slot":0,"target_id":143,"target_slot":4,"type":"VAE"},{"id":431,"origin_id":271,"origin_slot":0,"target_id":108,"target_slot":0,"type":"CONDITIONING"},{"id":116,"origin_id":115,"origin_slot":0,"target_id":108,"target_slot":1,"type":"STYLE_MODEL"},{"id":117,"origin_id":106,"origin_slot":0,"target_id":108,"target_slot":2,"type":"CLIP_VISION"},{"id":361,"origin_id":229,"origin_slot":0,"target_id":108,"target_slot":3,"type":"IMAGE"},{"id":437,"origin_id":143,"origin_slot":0,"target_id":271,"target_slot":0,"type":"CONDITIONING"},{"id":438,"origin_id":143,"origin_slot":1,"target_id":271,"target_slot":1,"type":"CONDITIONING"},{"id":167,"origin_id":138,"origin_slot":0,"target_id":118,"target_slot":0,"type":"MODEL"},{"id":137,"origin_id":101,"origin_slot":0,"target_id":118,"target_slot":3,"type":"INT"},{"id":138,"origin_id":101,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":119,"origin_id":113,"origin_slot":0,"target_id":109,"target_slot":0,"type":"LATENT"},{"id":120,"origin_id":110,"origin_slot":0,"target_id":109,"target_slot":1,"type":"VAE"},{"id":254,"origin_id":169,"origin_slot":0,"target_id":138,"target_slot":0,"type":"*"},{"id":444,"origin_id":-10,"origin_slot":0,"target_id":165,"target_slot":0,"type":"MODEL"},{"id":423,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":0,"type":"CONDITIONING"},{"id":425,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":1,"type":"CONDITIONING"},{"id":441,"origin_id":-10,"origin_slot":3,"target_id":148,"target_slot":0,"type":"*"},{"id":446,"origin_id":-10,"origin_slot":4,"target_id":229,"target_slot":0,"type":"*"},{"id":397,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":418,"origin_id":109,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}}]},"config":{},"extra":{"ue_links":[],"ds":{"scale":0.5131581182307067,"offset":[5708.610370522761,2933.5992999934438]}},"version":0.4}